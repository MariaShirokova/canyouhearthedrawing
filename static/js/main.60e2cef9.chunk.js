(this["webpackJsonphear-draw-ts"]=this["webpackJsonphear-draw-ts"]||[]).push([[0],{100:function(e,n){},102:function(e,n){},109:function(e,n,t){},110:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),i=t(28),a=t.n(i),u=t(6),c=t(32),s=t.n(c),l=t(51),d=t(14),f=t(17),h=t(63),v=function(e){return{x:e.offsetX,y:e.offsetY}},g=function(e,n){if(console.log("core change ",n),function(e){return!!e.type}(n)){var t=e.bounds,r=t.width,o=t.height,i=t.x,a=t.y,u={stops:n.points.map((function(e){return new s.a.GradientStop(new s.a.Color(e.red/255,e.green/255,e.blue/255,e.alpha),e.left/100)})),radial:"linear"!==n.type};"linear"==n.type?e.fillColor={gradient:u,origin:[i,a],destination:[i+r,a+o]}:e.fillColor={gradient:u,destination:[i,a],origin:[i+Math.round(r/2),a+Math.round(o/2)]}}else e.fillColor=new s.a.Color(n.red/255,n.green/255,n.blue/255,n.alpha)},b=["left","diagonal-rt-lb","diagonal-rb-lt"],p=["top","diagonal-lb-rt","diagonal-rb-lt"],m=["left","right","diagonal-lt-rb","diagonal-rb-lt","diagonal-lb-rt","diagonal-rt-lb"],y=["down","top","diagonal-lt-rb","diagonal-rb-lt","diagonal-lb-rt","diagonal-rt-lb"],O={down:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize","diagonal-lb-rt":"nesw-resize","diagonal-rb-lt":"nwse-resize","diagonal-lt-rb":"nwse-resize","diagonal-rt-lb":"nesw-resize"},w={right:{down:"diagonal-lt-rb",top:"diagonal-lb-rt"},left:{down:"diagonal-rt-lb",top:"diagonal-rb-lt"}},j=function(){function e(n,t){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;Object(d.a)(this,e),this.paperScope=n,this.expandSize=o,this.onResize=null,this._resizeHoverRectangle=void 0,this._resizeVisibleRectangle=void 0,this._cursorBeforeModify=null,this._isShow=!1,this._onDocumentMouseUp=null,this._onDocumentMouseMove=null,this.unbindMouseHoverHandlers=function(){r._resizeHoverRectangle.onMouseMove=null,r._resizeHoverRectangle.onMouseLeave=null},this.bindMouseHoverHandlers=function(){r._resizeHoverRectangle.onMouseMove=function(e){r.handleMouseMove(e)},r._resizeHoverRectangle.onMouseLeave=function(){r.handleBlur()}},this.handleMouseDown=function(e){r.unbindMouseHoverHandlers();var n=function(){return r.handleMouseUp()};window.addEventListener("mouseup",n),r._onDocumentMouseUp=n;var t=r.resizeHandlerCreator(e);window.addEventListener("mousemove",t),r._onDocumentMouseMove=t},this.handleMouseUp=function(){r._onDocumentMouseUp&&window.removeEventListener("mouseup",r._onDocumentMouseUp),r._onDocumentMouseMove&&window.removeEventListener("mousemove",r._onDocumentMouseMove),r.bindMouseHoverHandlers()},this.handleMouseMove=function(e){var n=r.calculateDirection(e),t=O[n];null===r._cursorBeforeModify&&(r._cursorBeforeModify=document.body.style.cursor),document.body.style.cursor=t},this.handleBlur=function(){null!=r._cursorBeforeModify&&(document.body.style.cursor=r._cursorBeforeModify,r._cursorBeforeModify=null)},this.calculateDirection=function(e){var n=r._resizeHoverRectangle.bounds,t=n.height,o=n.width,i=n.x,a=n.y,u=(o+10)/100,c=(t+10)/100,s=20/u,l=20/c,d=(100-2*s)/2,f=(100-2*s)/2,h=(e.point.x-i)/u,v=(e.point.y-a)/c,g=h-50,b=v-50;return Math.abs(g)>=d&&Math.abs(b)>=f?w[g>0?"right":"left"][b>0?"down":"top"]:h<l?"left":h>100-l?"right":v<s?"top":"down"};var i=this.self.expandRectangle(t,this.expandSize),a=new this.paperScope.Color(0,0,0,.2);this._resizeVisibleRectangle=new this.paperScope.Path.Rectangle(i),this._resizeVisibleRectangle.strokeColor=a,this._resizeVisibleRectangle.strokeWidth=2,this._resizeVisibleRectangle.visible=!1;var u=this.self.expandRectangle(t,this.expandSize),c=new this.paperScope.Color(0,0,0,Number.EPSILON);this._resizeHoverRectangle=new this.paperScope.Path.Rectangle(u),this._resizeHoverRectangle.strokeColor=c,this._resizeHoverRectangle.strokeWidth=20,this._resizeHoverRectangle.visible=!1,this.bindMouseHoverHandlers(),this._resizeHoverRectangle.onMouseDown=function(e){r.handleMouseDown(e)}}return Object(f.a)(e,[{key:"updateSize",value:function(e){var n=this.self.expandRectangle(e,this.expandSize);this._resizeVisibleRectangle.bounds=n.clone(),this._resizeHoverRectangle.bounds=n}},{key:"shift",value:function(e,n){this._resizeHoverRectangle.position.x+=e,this._resizeHoverRectangle.position.y+=n,this._resizeVisibleRectangle.position.x+=e,this._resizeVisibleRectangle.position.y+=n}},{key:"bringToFront",value:function(){this._resizeVisibleRectangle.bringToFront(),this._resizeHoverRectangle.bringToFront()}},{key:"remove",value:function(){this._resizeVisibleRectangle.remove(),this._resizeHoverRectangle.remove()}},{key:"resizeHandlerCreator",value:function(e){var n=this,t=this.calculateDirection(e),r=b.includes(t),o=p.includes(t),i=this._resizeHoverRectangle.bounds.clone(),a=e.point;return console.log(t),function(e){console.clear(),console.log(e);var u=a.x,c=a.y,s=e.offsetX,l=e.offsetY,d=m.includes(t)?s-u:0,f=y.includes(t)?l-c:0;d=r?-d:d,f=o?-f:f;var h=i.clone(),v=h.width+d,g=h.height+f;if(v>10?(h.width=v,h.x+=r?-d:0):(h.width=n._resizeHoverRectangle.bounds.width,h.x=n._resizeHoverRectangle.bounds.x),g>10?(h.height=g,h.y+=o?-f:0):(h.height=n._resizeHoverRectangle.bounds.height,h.y=n._resizeHoverRectangle.bounds.y),n._resizeVisibleRectangle.bounds=h.clone(),n._resizeHoverRectangle.bounds=h,n.onResize){var b=n.self.unExpandRectangle(h,n.expandSize),p={width:b.width,height:b.height},O={x:b.x,y:b.y};n.onResize(p,O)}}}},{key:"isShow",get:function(){return this._isShow},set:function(e){this._isShow!==e&&(this._resizeVisibleRectangle.visible=e,this._resizeHoverRectangle.visible=e,this._isShow=e)}},{key:"self",get:function(){return e}}],[{key:"expandRectangle",value:function(e,n){var t=e.clone();return t.x-=n,t.y-=n,t.width+=2*n,t.height+=2*n,t}},{key:"unExpandRectangle",value:function(e,n){var t=e.clone();return t.x+=n,t.y+=n,t.width-=2*n,t.height-=2*n,t}}]),e}(),x={segments:!0,stroke:!0,fill:!0,tolerance:5},R=function(){function e(n,t,r,o){Object(d.a)(this,e),this.paperScope=n,this.isPlayRef=t,this.playRef=r,this.id=o,this.coreFigure=void 0,this._isActive=!1,this._ResizeArea=null,this._lastMovePosition=null,this._isSegmentMove=!0,this._moveFigureHandler=null,this._moveSegmentHandler=null,this.onClick=null}return Object(f.a)(e,[{key:"bringToFront",value:function(){var e;this.coreFigure.bringToFront(),null===(e=this._ResizeArea)||void 0===e||e.bringToFront()}},{key:"remove",value:function(){this._moveFigureHandler&&window.removeEventListener("mousemove",this._moveFigureHandler),this._ResizeArea&&this._ResizeArea.remove(),this.coreFigure.remove()}},{key:"getColor",value:function(){return this.coreFigure.fillColor}},{key:"setColor",value:function(e){g(this.coreFigure,e)}},{key:"isSmoothFigure",value:function(){return!1}},{key:"isCanChangePoints",value:function(){return!1}},{key:"bindHandlers",value:function(){var e=this;this.coreFigure.strokeColor=new this.paperScope.Color(0,0,0,Number.EPSILON),this.coreFigure.strokeWidth=5,this.coreFigure.selectedColor=new this.paperScope.Color(0,1,0),this.paperScope.project.view.on("mouseup",(function(n){var t;console.log("local mouseup"),e.unbindSegmentMoveHandler();var r=n.modifiers.shift;if(e.isActive&&r){var o=e.paperScope.project.hitTest(n.point,x);o&&o.item===e.coreFigure&&"segment"===o.type&&(o.segment.remove(),null===(t=e._ResizeArea)||void 0===t||t.updateSize(e.coreFigure.bounds),n.stopPropagation())}})),this.coreFigure.onMouseUp=function(n){e.unbindFigureMoveHandler()},this.coreFigure.onMouseDown=function(n){if(e.isPlayRef.current)e.playRef.current(e);else{var t=!0;if(e.isActive){if(e.isCanChangePoints()){var r=e.paperScope.project.hitTest(n.point,x);if(r){var o,i=n.modifiers.shift;if(i&&"segment"===r.type)r.segment.remove(),null===(o=e._ResizeArea)||void 0===o||o.updateSize(e.coreFigure.bounds),n.stopPropagation(),t=!1;else if("segment"!==r.type||i){if("stroke"===r.type){var a,u=r.location.index+1,c=e.coreFigure.insert(u,n.point);e.isSmoothFigure()&&e.coreFigure.smooth(),null===(a=e._ResizeArea)||void 0===a||a.updateSize(e.coreFigure.bounds),e.bindSegmentMoveHandler(c),t=!1}}else e.bindSegmentMoveHandler(r.segment),t=!1}}}else e.paperScope.project.activeLayer.selected=!1,e.isActive=!0;if(t){var s=n.point,l=s.x,d=s.y;e.bindFigureMoveHandler({x:l,y:d})}e.onClick&&e.onClick()}}}},{key:"bindSegmentMoveHandler",value:function(e){var n=this;this._isSegmentMove=!0,this._moveSegmentHandler=Object(h.throttle)((function(t){var r,o=v(t);e.point.x=o.x,e.point.y=o.y,null===(r=n._ResizeArea)||void 0===r||r.updateSize(n.coreFigure.bounds)}),20),window.addEventListener("mousemove",this._moveSegmentHandler)}},{key:"unbindSegmentMoveHandler",value:function(){this._isSegmentMove=!1,this._moveSegmentHandler&&(window.removeEventListener("mousemove",this._moveSegmentHandler),this._moveSegmentHandler=null)}},{key:"bindFigureMoveHandler",value:function(e){var n=this;this._lastMovePosition=e,this._moveFigureHandler=Object(h.throttle)((function(e){return n.moveFigure(e)}),20),window.addEventListener("mousemove",this._moveFigureHandler)}},{key:"unbindFigureMoveHandler",value:function(){this._moveFigureHandler&&(window.removeEventListener("mousemove",this._moveFigureHandler),this._lastMovePosition=null)}},{key:"moveFigure",value:function(e){if(this._lastMovePosition){var n=v(e),t=n.x-this._lastMovePosition.x,r=n.y-this._lastMovePosition.y;this.coreFigure.position.x+=t,this.coreFigure.position.y+=r,this._ResizeArea&&this._ResizeArea.shift(t,r),this._lastMovePosition=n}}},{key:"resizeFigure",value:function(e,n){this.coreFigure.bounds.width=e.width,this.coreFigure.bounds.height=e.height,this.coreFigure.bounds.x=n.x,this.coreFigure.bounds.y=n.y}},{key:"scope",get:function(){return this.paperScope}},{key:"isActive",get:function(){return this._isActive},set:function(e){var n=this;this._isActive!==e&&(this._ResizeArea||(this._ResizeArea=new j(this.paperScope,this.coreFigure.bounds),this._ResizeArea.onResize=function(e,t){n.resizeFigure(e,t)}),this.isCanChangePoints()&&(this.coreFigure.selected=e),this._ResizeArea.isShow=e,this._isActive=e)}},{key:"isResizing",get:function(){return!!this._ResizeArea&&this._ResizeArea.isShow},set:function(e){var n=this;this._ResizeArea||(this._ResizeArea=new j(this.paperScope,this.coreFigure.bounds),this._ResizeArea.onResize=function(e,t){n.resizeFigure(e,t)}),this._ResizeArea.isShow=e}}]),e}(),k=t(27),_=t(26),C=function(e){Object(k.a)(t,e);var n=Object(_.a)(t);function t(e,r,o,i,a,u){var c;return Object(d.a)(this,t),(c=n.call(this,e,r,o,u)).coreFigure=void 0,c.coreFigure=new e.Path.Ellipse(i),c.coreFigure.fillColor=a,c.bindHandlers(),c}return t}(R),E=function(e){Object(k.a)(t,e);var n=Object(_.a)(t);function t(e,r,o,i,a,u){var c;return Object(d.a)(this,t),(c=n.call(this,e,r,o,u)).coreFigure=void 0,c.coreFigure=new e.Path.Rectangle(i),c.coreFigure.fillColor=a,c.bindHandlers(),c}return t}(R),M=function(e){Object(k.a)(t,e);var n=Object(_.a)(t);function t(e,r,o,i,a,u){var c;return Object(d.a)(this,t),(c=n.call(this,e,r,o,u)).coreFigure=void 0,c.coreFigure=c.createBlobPath(i),c.coreFigure.fillColor=a,c.bindHandlers(),c}return Object(f.a)(t,[{key:"isCanChangePoints",value:function(){return!0}},{key:"createBlobPath",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=1,r=new this.paperScope.Path;r.closed=!0;var o=e.point.clone();o.x+=Math.round(e.width/2),o.y+=Math.round(e.height/2);for(var i=0;i<n;i++){var a=new this.paperScope.Point({length:.5*t+Math.random()*t*.25,angle:360/n*i});r.add(o.multiply(a))}return r.position.x=o.x+Math.round(e.width/2),r.position.y=o.y+Math.round(e.height/2),this.isSmoothFigure()&&r.smooth(),r}}]),t}(R),z=function(e){Object(k.a)(t,e);var n=Object(_.a)(t);function t(){return Object(d.a)(this,t),n.apply(this,arguments)}return Object(f.a)(t,[{key:"isSmoothFigure",value:function(){return!0}}]),t}(M),S=t(10),F=t(11);function H(){var e=Object(S.a)(["\n  width: 100%;\n  height: 100%;\n"]);return H=function(){return e},e}function P(){var e=Object(S.a)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100%;\n"]);return P=function(){return e},e}var N=F.a.div(P()),B=F.a.div(H()),A=Object(r.memo)((function(e){var n=e.canvasRef;return console.log("test"),o.a.createElement(B,null,o.a.createElement("canvas",{ref:n,style:{width:"100%",height:"100%"}}))})),D=t(53),L={ellipse:C,rectangle:E,polygon:M,blob:z},T=Object(r.memo)((function(e){var n=e.setSelectFigure,t=e.setCanvasReady,i=e.createFigureRef,a=e.removeFigureRef,u=e.rootBackgroundRef,s=e.isPlayRef,d=Object(r.useMemo)((function(){return new l.a(D.a)}),[]),f=Object(r.useRef)(null),h=Object(r.useRef)(null),v=Object(r.useRef)(new c.PaperScope),g=Object(r.useRef)([]),b=Object(r.useRef)((function(e){var n=g.current.find((function(n){return n.figure===e}));n&&d.playSong(n.track.map((function(e){return e.sound})))}));Object(r.useEffect)((function(){if(!f.current)throw new Error("Expected canvas element missing");var e=v.current;e.setup(f.current);var r=new e.Path.Rectangle(e.view.bounds);r.fillColor=new e.Color(1,1,1,1),r.onClick=function(){n(null),g.current.forEach((function(e){e.figure.isActive=!1}))},h.current=r,u.current=r,e.project.view.on("mouseup",(function(t){e.project.hitTest(t.point,{segments:!0,stroke:!0,fill:!0,tolerance:5})||(n(null),g.current.forEach((function(e){e.figure.isActive=!1})))})),t()}),[n,t]);var p=Object(r.useCallback)((function(e){e.bringToFront(),g.current.forEach((function(t){e===t.figure?n(t):t.figure.isActive=!1}))}),[n]),m=Object(r.useCallback)((function(e){var n=v.current;if(n){var t=L[e],r=new c.Color(Math.random(),Math.random(),Math.random()),o=new n.Point(80,80),i=new n.Size(200,200),a=new n.Rectangle(o,i),u=new t(n,s,b,a,r,"test");u.onClick=function(){return p(u)};var l={figure:u,track:[]};g.current.push(l)}}),[p]),y=Object(r.useCallback)((function(e){var n=g.current.findIndex((function(n){return n===e}));if(-1!==n){var t=g.current[n];g.current.splice(n,1),t.figure.remove()}}),[]);return Object(r.useEffect)((function(){i.current=m,a.current=y}),[m,y,i,a]),o.a.createElement(N,null,o.a.createElement(A,{canvasRef:f}))})),V=t(148),I=(t(73),t(79)),X=t(141),U=t(145);function W(){var e=Object(S.a)(["\n  width: 100%;\n"]);return W=function(){return e},e}function G(){var e=Object(S.a)(["\n  width: 100%;\n"]);return G=function(){return e},e}function Z(){var e=Object(S.a)(["\n  & MuiButtonBase-root {\n    border-radius: 0;\n  }\n"]);return Z=function(){return e},e}function J(){var e=Object(S.a)(["\n  height: 100%;\n  width: 260px;\n  padding: 15px 10px;\n  border-left: 1px solid #c1c1c1;\n\n  &:after {\n    content: '';\n    display: block;\n    width: 260px;\n  }\n"]);return J=function(){return e},e}var Y=F.a.div(J()),q=(F.a.div(Z()),Object(F.a)(U.a)(G()),Object(F.a)(X.a)(W()),t(57)),K=t(149),Q=t(147),$=t(81);function ee(){var e=Object(S.a)(["\n  .ui-color-picker {\n    width: 100%;\n    margin: 0;\n    padding-top: 10px;\n    background-color: transparent;\n    .input-group {\n      display: none;\n    }\n  }\n"]);return ee=function(){return e},e}function ne(){var e=Object(S.a)(["\n  padding: 0 5px 5px;\n"]);return ne=function(){return e},e}var te=F.a.div(ne()),re=F.a.div(ee()),oe={kind:"rgb",red:255,green:0,blue:0,alpha:1},ie=function(e){var n=e.color,t=e.onColorChange,i=Object(r.useState)(null!==n&&void 0!==n?n:oe),a=Object(u.a)(i,2),c=a[0],s=a[1],l=Object(r.useState)(0),d=Object(u.a)(l,2),f=d[0],h=d[1],v=Object(r.useState)(!1),g=Object(u.a)(v,2),b=g[0],p=g[1];Object(r.useEffect)((function(){if(n){var e=Number("gradient"===n.kind);console.log("updatePikerType ",e),h(e),s(Object(q.a)({},n))}p(!0)}),[n,s,h,p]),Object(r.useLayoutEffect)((function(){p(!1)}),[b,p]);var m=function(e){s(e),t(e)},y=Object(r.useMemo)((function(){var e={};return c?(f&&"gradient"===c.kind&&(e.gradient=Object(q.a)({},c),delete e.gradient.kind),f||"rgb"!==c.kind||(e.color=Object(q.a)({},c),delete e.color.kind),e):e}),[c,f]);return b?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(te,null,o.a.createElement(Q.a,{value:f,onChange:function(e){return h(e.target.value)},fullWidth:!0},o.a.createElement(K.a,{value:0},"Fill"),o.a.createElement(K.a,{value:1},"Gradient"))),o.a.createElement(re,null,o.a.createElement($.ColorPicker,Object.assign({onStartChange:m,onChange:m,onEndChange:m,isGradient:f},y))))},ae=function(e){if("rgb"===e.type)return{kind:"rgb",alpha:e.alpha,red:Math.round(255*e.red),blue:Math.round(255*e.blue),green:Math.round(255*e.green)};var n=e.gradient;return{kind:"gradient",points:n.stops.map((function(e){return{alpha:e.color.alpha,red:Math.round(255*e.color.red),blue:Math.round(255*e.color.blue),green:Math.round(255*e.color.green),left:100*e.offset}})),type:n.radial?"radial":"linear"}},ue=function(e){var n=e.figureData,t=e.rootBackgroundRef,i=Object(r.useCallback)((function(e,n){if(n)n.figure.setColor(e);else{var r=t.current;if(!r)return;g(r,e)}}),[]),a=Object(r.useCallback)((function(e,n){n&&(n.track=e)}),[]),u=Object(r.useMemo)((function(){if(!n){var e=t.current;return e&&e.fillColor?ae(e.fillColor):null}var r=n.figure.getColor();return r&&ae(r)}),[n]);return o.a.createElement(Y,null,o.a.createElement(V.a,null,"Color"),o.a.createElement(ie,{onColorChange:function(e){return i(e,n)},color:u}),!!n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(V.a,null,"Sound"),o.a.createElement(I.default,{onMusicChange:function(e){return a(e,n)},track:null===n||void 0===n?void 0:n.track})))},ce=t(146),se=t(82),le=t.n(se),de=t(86),fe=t(83),he=t.n(fe),ve=t(84),ge=t.n(ve);function be(){return(be=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function pe(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var me=o.a.createElement("path",{d:"M31.5 15.5C31.5 23.7694 24.5755 30.5 16 30.5C7.4245 30.5 0.5 23.7694 0.5 15.5C0.5 7.23057 7.4245 0.5 16 0.5C24.5755 0.5 31.5 7.23057 31.5 15.5Z",stroke:"black"}),ye=function(e){var n=e.svgRef,t=e.title,r=pe(e,["svgRef","title"]);return o.a.createElement("svg",be({width:32,height:31,viewBox:"0 0 32 31",fill:"none",ref:n},r),t?o.a.createElement("title",null,t):null,me)},Oe=o.a.forwardRef((function(e,n){return o.a.createElement(ye,be({svgRef:n},e))}));t.p;function we(){return(we=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function je(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var xe=o.a.createElement("path",{d:"M26.3388 2L17.6612 14.4091L2.04132 4.48182L11.0661 20.7909L1 23.2727L12.4545 25.7545L8.63636 41L20.438 27.1727L33.6281 36.0364L25.2975 23.2727L43 14.4091L25.2975 15.4727L26.3388 2Z",stroke:"black"}),Re=function(e){var n=e.svgRef,t=e.title,r=je(e,["svgRef","title"]);return o.a.createElement("svg",we({width:44,height:42,viewBox:"0 0 44 42",fill:"none",ref:n},r),t?o.a.createElement("title",null,t):null,xe)},ke=o.a.forwardRef((function(e,n){return o.a.createElement(Re,we({svgRef:n},e))}));t.p;function _e(){return(_e=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ce(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var Ee=o.a.createElement("rect",{x:.5,y:.5,width:27,height:27,stroke:"black"}),Me=function(e){var n=e.svgRef,t=e.title,r=Ce(e,["svgRef","title"]);return o.a.createElement("svg",_e({width:28,height:28,viewBox:"0 0 28 28",fill:"none",ref:n},r),t?o.a.createElement("title",null,t):null,Ee)},ze=o.a.forwardRef((function(e,n){return o.a.createElement(Me,_e({svgRef:n},e))}));t.p;function Se(){return(Se=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Fe(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var He=o.a.createElement("path",{d:"M15.1726 10.98C12.265 13.0386 11.376 11.0544 9.84031 7.24901C8.5856 4.13987 3.88061 5.07261 2.62603 6.31627C0.772506 8.15367 0.164671 13.8435 2.62603 17.1983C5.13532 20.6183 7.95832 17.8201 7.95832 21.862C7.95832 24.0384 -0.510648 28.3912 4.82167 34.9205C10.154 41.4497 14.2316 28.3912 18.6229 27.4585C23.0142 26.5257 15.8 43.1127 27.4056 38.0296C40.8932 32.1222 27.5388 27.1049 29.6012 24.0384C30.8559 22.1729 42.2149 26.1542 40.8932 19.9965C37.7565 5.38349 27.4056 14.0891 26.1509 14.0891C24.6539 14.0891 23.3279 11.1665 24.5826 8.18173C26.1509 4.45073 27.4056 1.65252 19.5639 1.03069C11.7223 0.408858 17.3683 9.42542 15.1726 10.98Z",stroke:"black"}),Pe=function(e){var n=e.svgRef,t=e.title,r=Fe(e,["svgRef","title"]);return o.a.createElement("svg",Se({width:42,height:40,viewBox:"0 0 42 40",fill:"none",ref:n},r),t?o.a.createElement("title",null,t):null,He)},Ne=o.a.forwardRef((function(e,n){return o.a.createElement(Pe,Se({svgRef:n},e))}));t.p;function Be(){var e=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ",";\n  \n"]);return Be=function(){return e},e}function Ae(){var e=Object(S.a)(["\n  position: absolute;\n  left: 15px;\n  bottom: 50%;\n  margin-bottom: -166px;\n"]);return Ae=function(){return e},e}function De(){var e=Object(S.a)(["\n  position: absolute;\n  left: 15px;\n  bottom: 50%;\n  margin-bottom: -126px;\n"]);return De=function(){return e},e}function Le(){var e=Object(S.a)(["\n  &.MuiIconButton-root {\n    margin-bottom: ",";\n    background: ",";\n    color: #fff;\n    &:hover {\n      background: ",";\n    }\n  }\n"]);return Le=function(){return e},e}var Te=Object(F.a)(ce.a)(Le(),(function(e){return e.isDelete?"20px":"15px"}),(function(e){return e.isDelete?"#f44336":"#3f51b5"}),(function(e){return e.isDelete?"#d32f2f":"#303f9f"})),Ve=F.a.div(De()),Ie=(F.a.div(Ae()),F.a.div(Be(),(function(e){return e.hasButtonOffset?"10px":"0"}))),Xe=function(e){var n=e.selectFigure,t=e.isPlay,r=e.playToggle,i=e.createFigure,a=e.removeFigure;return o.a.createElement(Ve,null,!!n&&o.a.createElement(Ie,{hasButtonOffset:!0,onClick:function(){return a(n)}},o.a.createElement(Te,{isDelete:!0},o.a.createElement(le.a,null))),o.a.createElement(Ie,null,o.a.createElement(Te,{onClick:function(){return i("rectangle")}},o.a.createElement(de.a,{component:ze,viewBox:"0 0 34 34"})),o.a.createElement(Te,{onClick:function(){return i("ellipse")}},o.a.createElement(de.a,{component:Oe,viewBox:"0 0 36 36"})),o.a.createElement(Te,{onClick:function(){return i("blob")}},o.a.createElement(de.a,{component:Ne,viewBox:"0 0 36 36"})),o.a.createElement(Te,{onClick:function(){return i("polygon")}},o.a.createElement(de.a,{component:ke,viewBox:"0 0 36 36"}))),o.a.createElement(Ie,null,o.a.createElement(Te,{onClick:r},!t&&o.a.createElement(he.a,null),t&&o.a.createElement(ge.a,null))))},Ue=function(){var e=Object(r.useState)(null),n=Object(u.a)(e,2),t=n[0],i=n[1],a=Object(r.useState)(!1),c=Object(u.a)(a,2),s=c[0],l=c[1],d=Object(r.useRef)(null),f=Object(r.useRef)(null),h=Object(r.useRef)(null),v=Object(r.useRef)(!1),g=Object(r.useState)(!1),b=Object(u.a)(g,2),p=b[0],m=b[1];v.current=p;var y=Object(r.useCallback)((function(e){d.current&&d.current(e)}),[]),O=Object(r.useCallback)((function(){f.current&&t&&(f.current(t),i(null))}),[t,i]),w=Object(r.useCallback)((function(){l(!0)}),[l]),j=Object(r.useCallback)((function(){t&&(t.figure.isActive=!1),m(!p)}),[p,t,m]);return o.a.createElement(N,null,s&&o.a.createElement(Xe,{isPlay:p,selectFigure:t,createFigure:y,removeFigure:O,playToggle:j}),o.a.createElement(T,{setSelectFigure:i,setCanvasReady:w,createFigureRef:d,removeFigureRef:f,rootBackgroundRef:h,isPlayRef:v}),!p&&o.a.createElement(ue,{figureData:t,rootBackgroundRef:h}))},We=(t(108),t(109),function(){return o.a.createElement(Ue,null)}),Ge=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,150)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),r(e),o(e),i(e),a(e)}))};a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(We,null)),document.getElementById("root")),Ge()},51:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t(14),o=t(17),i=t(78);var a=function(){function e(n){var t=this;Object(r.a)(this,e),this.soundMap=void 0,this.soundMap={},Object.keys(n).forEach((function(e){var r=n[e];t.soundMap[e]=new i.Howl({src:[r]})}))}return Object(o.a)(e,[{key:"playSong",value:function(e){var n=this,t=e.find((function(e){return!n.soundMap[e]}));if(t)throw new Error("Unexpended sound ".concat(t));var r=this.soundMap;console.log(e),function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t[r];if(o){var i=n[o];i.once("end",(function(){e(n,t,r+1)})),i.play()}}(r,e)}}]),e}()},53:function(e,n,t){"use strict";n.a={moon:"./sounds/1 Xylophone.mp3",corona:"./sounds/2 Xylophone.mp3",confetti:"./sounds/3 Xylophone.mp3",bubbles:"./sounds/4 Xylophone.mp3",party:"./sounds/5 Xylophone.mp3",bass:"./sounds/6 Xylophone.mp3",x7:"./sounds/7 Xylophone.mp3",x8:"./sounds/8 Xylophone.mp3",x9:"./sounds/9 Xylophone.mp3",b1:"./sounds/1 Bass.mp3",b2:"./sounds/2 Bass.mp3",b3:"./sounds/3 Bass.mp3",b4:"./sounds/4 Bass.mp3",b5:"./sounds/5 Bass.mp3",b6:"./sounds/6 Bass.mp3",b7:"./sounds/7 Bass.mp3",b8:"./sounds/8 Bass.mp3",b9:"./sounds/9 Bass.mp3",d1:"./sounds/1 Drums.mp3",d2:"./sounds/2 Drums.mp3",d3:"./sounds/3 Drums.mp3",d4:"./sounds/4 Drums.mp3",d5:"./sounds/5 Drums.mp3",d6:"./sounds/6 Drums.mp3",d7:"./sounds/7 Drums.mp3",d8:"./sounds/8 Drums.mp3",d9:"./sounds/9 Drums.mp3",a1:"./sounds/1.mp3",a2:"./sounds/2.mp3",a3:"./sounds/3.mp3",a4:"./sounds/4.mp3",a5:"./sounds/5.mp3",a6:"./sounds/6.mp3",a7:"./sounds/7.mp3",a8:"./sounds/8.mp3",a9:"./sounds/9.mp3"}},74:function(e,n){},75:function(e,n,t){"use strict";var r=t(23),o=t(6),i=t(0),a=t.n(i),u=t(51),c=t(10),s=t(11);function l(){var e=Object(c.a)(["\n  width: 240px;\n  height: 240px;\n"]);return l=function(){return e},e}var d=s.a.div(l()),f=t(45);function h(){var e=Object(c.a)(["background: white"]);return h=function(){return e},e}function v(){var e=Object(c.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 100%;\n    /* margin: 0 10px; */\n    box-sizing: border-box;\n    background-color: ",";\n    text-align: center;\n    cursor: pointer;\n    font-size: 12px;\n    ","\n    * {\n        font-size: 12px;\n    }\n"]);return v=function(){return e},e}function g(){var e=Object(c.a)(["\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    height: 100%;\n    /* margin: 10px 0; */\n"]);return g=function(){return e},e}function b(){var e=Object(c.a)(["\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 10px;\n"]);return b=function(){return e},e}var p=s.a.div(b()),m=s.a.div(g()),y=s.a.div(v(),(function(e){var n;return null!==(n=e.color)&&void 0!==n?n:"#eee"}),(function(e){return e.isSelect&&Object(f.a)(h())})),O=function(e){var n=e.matrix,t=e.track,r=e.onToggleCell,o=Object(i.useMemo)((function(){var e=new Array(n.length).fill(null).map((function(e,n){return[n,{}]})),r=Object.fromEntries(e);return t.reduce((function(e,n,t){var r=n.position,o=r.x;return e[r.y][o]=t+1,e}),r)}),[t,n]),u=Object(i.useCallback)((function(e,n){return!!o[n][e]}),[o]),c=Object(i.useCallback)((function(e,n){r({x:e,y:n})}),[r]);return a.a.createElement(p,null,n.map((function(e,n){return a.a.createElement(m,{key:n},e.map((function(e,t){return a.a.createElement(y,{key:t,isSelect:u(t,n),color:e.color,onClick:function(){return c(t,n)}},e.nodeName)})))})))},w=[[{nodeName:"a7",sound:"x7",color:"#72cc7b"},{nodeName:"a8",sound:"x8",color:"#868d7c"},{nodeName:"a9",sound:"x9",color:"#994d7c"},{nodeName:"b7",sound:"b7",color:"#8d3384"},{nodeName:"b8",sound:"b8",color:"#797283"},{nodeName:"b9",sound:"b9",color:"#66b283"}],[{nodeName:"a4",sound:"bubbles",color:"#b7c941"},{nodeName:"a5",sound:"party",color:"#c7993f"},{nodeName:"a6",sound:"bass",color:"#c3684a"},{nodeName:"b4",sound:"b4",color:"#4836be"},{nodeName:"b5",sound:"b5",color:"#3866c0"},{nodeName:"b6",sound:"b6",color:"#3c97b5"}],[{nodeName:"a1",sound:"moon",color:"#f4e501"},{nodeName:"a2",sound:"corona",color:"#f1b40d"},{nodeName:"a3",sound:"confetti",color:"#ed8318"},{nodeName:"b1",sound:"b1",color:"#0b1afe"},{nodeName:"b2",sound:"b2",color:"#0e4bf2"},{nodeName:"b3",sound:"b3",color:"#127ce7"}],[{nodeName:"d7",sound:"d7",color:"#aaa3b1"},{nodeName:"d8",sound:"d8",color:"#b94eb2"},{nodeName:"d9",sound:"d9",color:"#c617b2"},{nodeName:"x7",sound:"a7",color:"#ba9ceb"},{nodeName:"x8",sound:"a8",color:"#6f6dde"},{nodeName:"x9",sound:"a9",color:"#3b4fd5"}],[{nodeName:"d4",sound:"d4",color:"#d89e81"},{nodeName:"d5",sound:"d5",color:"#e15c7f"},{nodeName:"d6",sound:"d6",color:"#df2a89"},{nodeName:"x4",sound:"a4",color:"#6d8bb3"},{nodeName:"x5",sound:"a5",color:"#3366a7"},{nodeName:"x6",sound:"a6",color:"#154da9"}],[{nodeName:"d1",sound:"d1",color:"#f9ce04"},{nodeName:"d2",sound:"d2",color:"#f87f2e"},{nodeName:"d3",sound:"d3",color:"#f6434c"},{nodeName:"x1",sound:"a1",color:"#0f802e"},{nodeName:"x2",sound:"a2",color:"#00614f"},{nodeName:"x3",sound:"a3",color:"#004867"}]],j=t(53),x=t(141);n.a=function(e){var n=e.track,t=e.onMusicChange,c=Object(i.useState)([]),s=Object(o.a)(c,2),l=s[0],f=s[1];Object(i.useEffect)((function(){f((function(){return null!==n&&void 0!==n?n:[]}))}),[n,f]),Object(i.useEffect)((function(){t&&t(l)}),[l,t]);var h=Object(i.useMemo)((function(){return new u.a(j.a)}),[]),v=Object(i.useCallback)((function(){var e=l.map((function(e){return e.sound}));h.playSong(e)}),[h,l]),g=Object(i.useCallback)((function(e){f((function(n){var t=n.findIndex((function(n){return function(e,n){var t=e.position;return n.x===t.x&&n.y===t.y}(n,e)}));if(t>-1)return[].concat(Object(r.a)(n.slice(0,t)),Object(r.a)(n.slice(t+1)));var o=w[e.y][e.x].sound;return[].concat(Object(r.a)(n),[{position:e,sound:o}])}))}),[f]);return a.a.createElement(d,null,a.a.createElement(O,{matrix:w,track:l,onToggleCell:g}),a.a.createElement(x.a,{onClick:v,color:"primary",variant:"contained",fullWidth:!0},"Play"))}},79:function(e,n,t){"use strict";t(74);var r=t(75);t.d(n,"default",(function(){return r.a}))},95:function(e,n,t){e.exports=t(110)}},[[95,1,2]]]);
//# sourceMappingURL=main.60e2cef9.chunk.js.map