{"version":3,"sources":["components/common/drawer/utils/convertMouseEventToPosition.ts","components/common/drawer/entity/utils/changeColor.js","components/common/drawer/entity/core/resizeArea.ts","components/common/drawer/entity/core/abstractFigure.ts","components/common/drawer/entity/ellipse.ts","components/common/drawer/entity/rectangle.ts","components/common/drawer/entity/polygon.ts","components/common/drawer/entity/blob.ts","components/common/drawer/styleds/root.tsx","components/common/drawer/parts/canvas.tsx","components/common/drawer/drawer.tsx","components/common/drawer/styleds/sidebar.tsx","components/common/drawer/parts/sidebar/color-piker.tsx","components/common/drawer/parts/sidebar/sidebar.tsx","components/common/drawer/assets/ellipse.svg","components/common/drawer/assets/polygon.svg","components/common/drawer/assets/rectangle.svg","components/common/drawer/assets/blob.svg","components/common/drawer/parts/create-control-group.tsx","components/common/drawer/index.ts","components/common/drawer/drawer-container.tsx","app.tsx","reportWebVitals.ts","index.tsx","utils/MusicFactory.ts","consts/soundMap.ts","components/common/launchpad/styleds/root.tsx","components/common/launchpad/styleds/matrix.tsx","components/common/launchpad/parts/matrix.tsx","consts/matrix.ts","components/common/launchpad/launchpad.tsx","utils/isPositionEqual.ts","components/common/launchpad/index.ts"],"names":["mouseEvent","x","offsetX","y","offsetY","figure","color","console","log","type","isGradient","bounds","width","height","gradient","stops","points","map","point","paper","GradientStop","Color","red","green","blue","alpha","left","radial","fillColor","origin","destination","Math","round","changingXDirections","changingYDirections","horizontalResizeDirection","verticalResizeDirection","cursorDirectionMap","diagonalDirMap","right","down","top","ResizeArea","paperScope","rectangle","expandSize","onResize","_resizeHoverRectangle","_resizeVisibleRectangle","_cursorBeforeModify","_isShow","_onDocumentMouseUp","_onDocumentMouseMove","unbindMouseHoverHandlers","onMouseMove","onMouseLeave","bindMouseHoverHandlers","event","handleMouseMove","handleBlur","handleMouseDown","mouseUpHandler","handleMouseUp","window","addEventListener","mouseMoveHandler","resizeHandlerCreator","removeEventListener","direction","calculateDirection","cursor","document","body","style","onePercentForWidth","STROKE_WIDTH","onePercentForHeight","strokeHorizontalPercent","strokeVerticalPercent","horizontalTriggerValue","verticalTriggerValue","percentByX","percentByY","diffX","diffY","abs","resizeVisibleRectangle","this","self","expandRectangle","rectangleVisibleColor","Path","Rectangle","strokeColor","strokeWidth","visible","resizeHoverRectangle","rectangleHoverColor","Number","EPSILON","onMouseDown","updateBounds","clone","position","bringToFront","remove","isXPositionChange","includes","isYPositionChange","initBounds","initResizePoint","clear","initX","initY","updateBoundsWidth","updateBoundsHeight","originalRectangle","unExpandRectangle","size","state","rectangleClone","hitOptions","segments","stroke","fill","tolerance","AbstractFigure","isPlayRef","playRef","id","coreFigure","_isActive","_ResizeArea","_lastMovePosition","_isSegmentMove","_moveFigureHandler","_moveSegmentHandler","onClick","changeColor","selectedColor","project","view","on","unbindSegmentMoveHandler","isShiftPress","modifiers","shift","isActive","hitResult","hitTest","item","segment","updateSize","stopPropagation","onMouseUp","unbindFigureMoveHandler","current","mustBindHandler","isCanChangePoints","location","index","insert","isSmoothFigure","smooth","bindSegmentMoveHandler","activeLayer","selected","bindFigureMoveHandler","throttle","convertMouseEventToPosition","moveFigure","updatePosition","resizeFigure","isShow","Ellipse","bindHandlers","Polygon","createBlobPath","pointCount","maxRadius","path","closed","corePoint","i","delta","Point","length","random","angle","add","multiply","Blob","Container","styled","div","Content","memo","canvasRef","ref","figureClassMap","ellipse","polygon","blob","setSelectFigure","setCanvasReady","createFigureRef","removeFigureRef","rootBackgroundRef","musicFactory","useMemo","MusicFactory","soundMap","useRef","backgroundRef","scopeRef","PaperScope","figureArrRef","data","find","playSong","track","sound","useEffect","Error","scope","setup","background","forEach","onFigureClick","useCallback","triggerFigure","createFigure","CreatedClass","Size","createdFigure","selectData","push","removeFigure","findIndex","removedFigure","splice","SidebarContainer","Paper","Button","PickerSelectWrap","ColorPickerWrap","defaultColor","kind","ColorPickerComponent","onColorChange","useState","colorAttrs","setColorAttrs","pikerIsGradient","setPikerType","reset","setReset","updatePikerType","useLayoutEffect","onChange","colorProps","Select","value","target","fullWidth","MenuItem","onStartChange","onEndChange","convertToColorToPikerFormat","stop","offset","Sidebar","figureData","updateFigureColor","setColor","updateFigureTrack","transformColor","getColor","InputLabel","onMusicChange","_extends","Object","assign","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref","svgRef","title","props","viewBox","ForwardRef","forwardRef","CustomIconButton","IconButton","isDelete","ControlGroupContainer","ControlSubgroupContainer","hasButtonOffset","CreateControlGroup","selectFigure","isPlay","playToggle","SvgIcon","component","rectangleSVG","ellipseSVG","blobSVG","polygonSVG","Drawer","isCanvasReady","setCanvasStatus","setPlayStatus","figureType","togglePlayMode","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","SongFactory","initSoundData","url","Howl","src","soundArray","unexpendedSound","playSound","soundArr","soundKey","once","play","moon","corona","confetti","bubbles","party","bass","x7","x8","x9","b1","b2","b3","b4","b5","b6","b7","b8","b9","d1","d2","d3","d4","d5","d6","d7","d8","d9","a1","a2","a3","a4","a5","a6","a7","a8","a9","MatrixContainer","MatrixRow","MatrixCell","isSelect","css","LaunchpadMatrix","matrix","onToggleCell","orderMap","keyMap","Array","_","fromEntries","reduce","obj","isCellSelect","onCellClick","row","rowIndex","cell","cellIndex","nodeName","LaunchPad","localTrack","setMusic","onPlay","musicRoad","trackItem","entity","entityPosition","isPositionEqual","slice","defaultMatrix","variant"],"mappings":"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","file":"static/js/main.60e2cef9.chunk.js","sourcesContent":["import { IPosition } from '@consts/types';\n\nexport default (mouseEvent: MouseEvent): IPosition => ({\n  x: mouseEvent.offsetX,\n  y: mouseEvent.offsetY\n})","import paper from 'paper';\n\nconst isGradient = (color) => {\n  return !!color.type;\n}\n\nexport default (figure, color) => {\n  console.log('core change ', color);\n  if (!isGradient(color)) {\n    figure.fillColor = new paper.Color(color.red/255, color.green/255, color.blue/255, color.alpha);\n  } else {\n    const { width, height, x, y } = figure.bounds;\n    const gradient = {\n      stops: color.points.map((point) => new paper.GradientStop(\n        new paper.Color(point.red/255, point.green/255, point.blue/255, point.alpha),\n        point.left/100\n      )),\n      radial: color.type !== 'linear'\n    };\n    if (color.type == 'linear') {\n      figure.fillColor = {\n        gradient: gradient,\n        origin: [ x, y ],\n        destination: [ x + width, y + height],\n      }\n    } else {\n      figure.fillColor = {\n        gradient: gradient,\n        destination: [ x, y ],\n        origin: [ x + Math.round(width/2), y + Math.round(height/2)],\n      } \n    }\n  }\n}","import paper from 'paper'\nimport { IPosition, ISize } from '@consts/types';\n\n\n\ntype VerticalDirections = 'top' | 'down';\ntype HorizontalDirections = 'left' | 'right';\ntype SimpleDirections = VerticalDirections | HorizontalDirections;\n\n/* \n*   The direction in diagonal type names equals direction\n*   from bottom to top for diagonal.\n*\n*   More about types values: \n*   diagonal-lb-rt - ↗\n*   diagonal-rt-lb - ↙\n*   diagonal-rb-lt - ↖\n*   diagonal-lt-rb - ↘\n**/\ntype DiagonalRightDirections = 'diagonal-lb-rt' | 'diagonal-rt-lb';\ntype DiagonalLeftDirections = 'diagonal-rb-lt' | 'diagonal-lt-rb';\ntype DiagonalDirections = DiagonalRightDirections | DiagonalLeftDirections;\n\ntype Directions = SimpleDirections | DiagonalDirections;\n\ntype ResizeCursor = 'ew-resize' | 'ns-resize' | 'nesw-resize' | 'nwse-resize';\n\ntype CursorDirectionMap = { [key in Directions]: ResizeCursor };\ntype MapBySimpleDirections<T extends string> = {\n  [horizontalKey in HorizontalDirections]: {\n    [verticalKey in VerticalDirections]: T;\n  }\n}\n\ntype ResizeHandler = (size: ISize, position: IPosition) => void;\ntype MouseEventHandler = (event: MouseEvent) => void;\n\nconst changingXDirections: Directions[] = [\n  'left',\n  'diagonal-rt-lb',\n  'diagonal-rb-lt'\n]\n\nconst changingYDirections: Directions[] = [\n  'top',\n  'diagonal-lb-rt',\n  'diagonal-rb-lt'\n]\n\nconst horizontalResizeDirection: string[] = [\n  'left',\n  'right',\n  'diagonal-lt-rb',\n  'diagonal-rb-lt',\n  'diagonal-lb-rt',\n  'diagonal-rt-lb'\n];\nconst verticalResizeDirection: string[] = [\n  'down',\n  'top',\n  'diagonal-lt-rb',\n  'diagonal-rb-lt',\n  'diagonal-lb-rt',\n  'diagonal-rt-lb'\n];\n\nconst cursorDirectionMap: CursorDirectionMap = {\n  \"down\": 'ns-resize',\n  \"top\": 'ns-resize',\n  \"left\": 'ew-resize',\n  \"right\": 'ew-resize',\n  \"diagonal-lb-rt\": 'nesw-resize',\n  \"diagonal-rb-lt\": 'nwse-resize',\n  \"diagonal-lt-rb\": 'nwse-resize',\n  \"diagonal-rt-lb\": 'nesw-resize'\n}\n\nconst diagonalDirMap: MapBySimpleDirections<DiagonalDirections> = {\n  right: {\n    down: 'diagonal-lt-rb',\n    top: 'diagonal-lb-rt'\n  },\n  left: {\n    down: 'diagonal-rt-lb',\n    top: 'diagonal-rb-lt'\n  }\n}\n\n//  FIXME: Has problem where STROKE_WIDTH equals 10\n//  On right border created wrong cursor icon in case\n//  where cursor hover on max left postilion\nconst STROKE_VISIBLE_WIDTH = 2;\nconst STROKE_WIDTH = 20;\n\nconst DEFAULT_EXPAND_SIZE = 15;\n\nexport default class ResizeArea {\n  public onResize: ResizeHandler | null = null;\n\n  private _resizeHoverRectangle: paper.Path.Rectangle;\n  private _resizeVisibleRectangle: paper.Path.Rectangle;\n\n  private _cursorBeforeModify: string | null = null;\n  private _isShow: boolean = false;\n\n  private _onDocumentMouseUp: MouseEventHandler  | null = null;\n  private _onDocumentMouseMove: MouseEventHandler  | null = null;\n\n  constructor(\n    private paperScope: paper.PaperScope,\n    rectangle: paper.Rectangle,\n    private expandSize: number = DEFAULT_EXPAND_SIZE,\n  ) {\n    const resizeVisibleRectangle = this.self.expandRectangle(rectangle, this.expandSize);\n    const rectangleVisibleColor = new this.paperScope.Color(0, 0, 0, 0.2);\n    this._resizeVisibleRectangle = new this.paperScope.Path.Rectangle(resizeVisibleRectangle)\n\n    this._resizeVisibleRectangle.strokeColor = rectangleVisibleColor;\n    this._resizeVisibleRectangle.strokeWidth = STROKE_VISIBLE_WIDTH;\n    this._resizeVisibleRectangle.visible = false;\n\n    const resizeHoverRectangle = this.self.expandRectangle(rectangle, this.expandSize);\n    const rectangleHoverColor = new this.paperScope.Color(0, 0, 0, Number.EPSILON);\n    this._resizeHoverRectangle = new this.paperScope.Path.Rectangle(resizeHoverRectangle)\n\n    this._resizeHoverRectangle.strokeColor = rectangleHoverColor;\n    this._resizeHoverRectangle.strokeWidth = STROKE_WIDTH;\n    this._resizeHoverRectangle.visible = false;\n\n    this.bindMouseHoverHandlers();\n\n    this._resizeHoverRectangle.onMouseDown  = (event: paper.MouseEvent) => {\n      this.handleMouseDown(event)\n    }\n  }\n\n  public updateSize(rectangle: paper.Rectangle) {\n    const updateBounds = this.self.expandRectangle(rectangle, this.expandSize);\n    this._resizeVisibleRectangle.bounds = updateBounds.clone();\n    this._resizeHoverRectangle.bounds = updateBounds;\n  }\n\n  public get isShow() {\n    return this._isShow;\n  }\n  public set isShow(state: boolean) {\n    if (this._isShow === state) return;\n    this._resizeVisibleRectangle.visible = state;\n    this._resizeHoverRectangle.visible = state;\n    this._isShow = state;\n  }\n\n  public shift(x: number, y: number) {\n    this._resizeHoverRectangle.position.x += x;\n    this._resizeHoverRectangle.position.y += y;\n  \n    this._resizeVisibleRectangle.position.x += x;\n    this._resizeVisibleRectangle.position.y += y;\n  }\n\n  public bringToFront() {\n    this._resizeVisibleRectangle.bringToFront();\n    this._resizeHoverRectangle.bringToFront();\n  }\n\n  public remove() {\n    this._resizeVisibleRectangle.remove();\n    this._resizeHoverRectangle.remove();\n  }\n\n  protected unbindMouseHoverHandlers = () => {\n    this._resizeHoverRectangle.onMouseMove = null;\n    this._resizeHoverRectangle.onMouseLeave = null;\n  }\n\n  protected bindMouseHoverHandlers = () => {\n    this._resizeHoverRectangle.onMouseMove = (event: paper.MouseEvent) => {\n      this.handleMouseMove(event)\n    }\n    this._resizeHoverRectangle.onMouseLeave = () => {\n      this.handleBlur()\n    }\n  }\n\n  protected handleMouseDown = (event: paper.MouseEvent) => {\n    this.unbindMouseHoverHandlers();\n\n    const mouseUpHandler = () => this.handleMouseUp();\n    window.addEventListener('mouseup', mouseUpHandler);\n    this._onDocumentMouseUp = mouseUpHandler;\n\n    \n    const mouseMoveHandler = this.resizeHandlerCreator(event);\n    window.addEventListener('mousemove', mouseMoveHandler);\n    this._onDocumentMouseMove = mouseMoveHandler;\n  }\n\n  protected handleMouseUp = () => {\n    if (this._onDocumentMouseUp) {\n      window.removeEventListener('mouseup', this._onDocumentMouseUp);\n    }\n    if (this._onDocumentMouseMove) {\n      window.removeEventListener('mousemove', this._onDocumentMouseMove);\n    }\n\n    this.bindMouseHoverHandlers();\n  }\n\n  protected handleMouseMove = (event: paper.MouseEvent) => {\n    const direction = this.calculateDirection(event);\n    const cursor = cursorDirectionMap[direction];\n\n    if (this._cursorBeforeModify === null) {\n      this._cursorBeforeModify = document.body.style.cursor;\n    }\n\n    document.body.style.cursor = cursor;\n  }\n\n  protected handleBlur = () => {\n    if (this._cursorBeforeModify != null) {\n      document.body.style.cursor = this._cursorBeforeModify;\n      this._cursorBeforeModify = null;\n    }\n  }\n\n  protected resizeHandlerCreator(event: paper.MouseEvent): MouseEventHandler {\n    const direction = this.calculateDirection(event);\n    const isXPositionChange = changingXDirections.includes(direction);\n    const isYPositionChange = changingYDirections.includes(direction);\n    const initBounds = this._resizeHoverRectangle.bounds.clone();\n    const { point: initResizePoint } = event;\n    console.log(direction);\n    \n    return (event: MouseEvent) => {\n      console.clear();\n      console.log(event);\n      \n      const { x: initX, y: initY} = initResizePoint;\n      const { offsetX: x, offsetY: y } = event;\n\n      let diffX = horizontalResizeDirection.includes(direction) ? x - initX : 0;\n      let diffY = verticalResizeDirection.includes(direction) ? y - initY : 0;\n\n      diffX = isXPositionChange ? -diffX : diffX;\n      diffY = isYPositionChange ? -diffY : diffY;\n      \n\n      const bounds = initBounds.clone();\n      const updateBoundsWidth = bounds.width + diffX;\n      const updateBoundsHeight = bounds.height + diffY;\n\n      if (updateBoundsWidth > 10) {\n        bounds.width = updateBoundsWidth;\n        bounds.x += isXPositionChange ? -diffX : 0;\n      } else {\n        bounds.width = this._resizeHoverRectangle.bounds.width;\n        bounds.x = this._resizeHoverRectangle.bounds.x;\n      }\n\n      if (updateBoundsHeight > 10) {\n        bounds.height = updateBoundsHeight;\n        bounds.y += isYPositionChange ? -diffY : 0;\n      } else {\n        bounds.height = this._resizeHoverRectangle.bounds.height;\n        bounds.y = this._resizeHoverRectangle.bounds.y;\n      }\n      \n      this._resizeVisibleRectangle.bounds = bounds.clone();\n      this._resizeHoverRectangle.bounds = bounds;\n      if (this.onResize) {\n        const originalRectangle = this.self.unExpandRectangle(bounds, this.expandSize);\n        const size: ISize = { width: originalRectangle.width, height: originalRectangle.height };\n        const position: IPosition = { x: originalRectangle.x, y: originalRectangle.y };\n        this.onResize(size, position);\n      }\n    }\n  }\n\n  protected calculateDirection = (event: paper.MouseEvent): Directions => {\n    const { height, width, x, y } = this._resizeHoverRectangle.bounds;\n    const onePercentForWidth = (width + STROKE_WIDTH/2)/100;\n    const onePercentForHeight = (height + STROKE_WIDTH/2)/100;\n\n    const strokeHorizontalPercent = STROKE_WIDTH / onePercentForWidth;\n    const strokeVerticalPercent = STROKE_WIDTH / onePercentForHeight;\n\n    const horizontalTriggerValue = (100 - (strokeHorizontalPercent * 2))/2;\n    const verticalTriggerValue = (100 - (strokeHorizontalPercent * 2))/2;\n\n    const percentByX = (event.point.x - x) / onePercentForWidth;\n    const percentByY = (event.point.y - y) / onePercentForHeight;\n\n    const diffX = percentByX - 50;\n    const diffY = percentByY - 50;\n\n    const isPointOnDiagonal = \n      Math.abs(diffX) >= horizontalTriggerValue \n      && Math.abs(diffY) >= verticalTriggerValue;\n\n\n    if (isPointOnDiagonal) {\n      const HorizontalDir: HorizontalDirections = diffX > 0 ? 'right' : 'left';\n      const verticalDir: VerticalDirections = diffY > 0 ? 'down' : 'top';\n      return diagonalDirMap[HorizontalDir][verticalDir];\n    } else {\n      // TODO: make a complete algorithm\n      if (percentByX < strokeVerticalPercent) return 'left';\n      if (percentByX > 100 - strokeVerticalPercent) return 'right';\n      if (percentByY < strokeHorizontalPercent) return 'top';\n      if (percentByY > 100 - strokeHorizontalPercent) return 'down';\n      return 'down';\n    }\n  }\n\n  protected get self() {\n    return ResizeArea;\n  }\n\n  static expandRectangle(\n    rectangle: paper.Rectangle,\n    expandSize: number\n  ): paper.Rectangle {\n    const rectangleClone = rectangle.clone();\n    rectangleClone.x -= expandSize;\n    rectangleClone.y -= expandSize;\n    rectangleClone.width += expandSize * 2;\n    rectangleClone.height += expandSize * 2;\n    return rectangleClone;\n  }\n\n  static unExpandRectangle(\n    rectangle: paper.Rectangle,\n    expandSize: number\n  ): paper.Rectangle {\n    const rectangleClone = rectangle.clone();\n    rectangleClone.x += expandSize;\n    rectangleClone.y += expandSize;\n    rectangleClone.width -= expandSize * 2;\n    rectangleClone.height -= expandSize * 2;\n    return rectangleClone;\n  }\n};","import { throttle } from 'lodash'\nimport { IPosition, ISize } from '@consts/types'\nimport convertMouseEventToPosition from '../../utils/convertMouseEventToPosition';\nimport { CustomColor, CustomGradient } from '../../drawer.types';\nimport changeColor from '../utils/changeColor';\nimport ResizeArea from './resizeArea';\nimport { MutableRefObject } from 'react';\n\ntype MouseMoveHandler = (event: MouseEvent) => void;\n\nconst hitOptions = {\n\tsegments: true,\n\tstroke: true,\n\tfill: true,\n\ttolerance: 5\n};\n\nexport abstract class AbstractFigure {\n  protected abstract coreFigure: paper.Path;\n\n  private _isActive: boolean = false;\n  private _ResizeArea: ResizeArea | null = null;\n  private _lastMovePosition: IPosition | null = null;\n  private _isSegmentMove: boolean = true;\n  private _moveFigureHandler: MouseMoveHandler | null = null;\n  private _moveSegmentHandler: MouseMoveHandler | null = null\n\n  public onClick: VoidFunction | null = null;\n\n  constructor(\n    protected paperScope: paper.PaperScope,\n    protected isPlayRef: MutableRefObject<boolean>,\n    protected playRef: MutableRefObject<(figure: AbstractFigure) => void>,\n    protected id: string,\n  ) {}\n\n\n  public get scope() {\n    return this.paperScope;\n  }\n\n  public get isActive() {\n    return this._isActive;\n  }\n\n  public set isActive(state: boolean) {\n    if (this._isActive === state) return;\n    if (!this._ResizeArea) {\n      this._ResizeArea = new ResizeArea(this.paperScope, this.coreFigure.bounds);\n      this._ResizeArea.onResize = (size, position) => {\n        this.resizeFigure(size, position);\n      }\n    }\n\n    if (this.isCanChangePoints()) {\n      this.coreFigure.selected = state;\n    }\n  \n    this._ResizeArea.isShow = state;\n    this._isActive = state;\n  }\n\n  public bringToFront() {\n    this.coreFigure.bringToFront();\n    this._ResizeArea?.bringToFront();\n  }\n\n  public remove() {\n    if (this._moveFigureHandler) {\n      window.removeEventListener('mousemove', this._moveFigureHandler)\n    };\n\n    if (this._ResizeArea) this._ResizeArea.remove();\n    this.coreFigure.remove();\n  }\n\n  public getColor() {\n    return this.coreFigure.fillColor;\n  }\n\n  public setColor(color: CustomColor | CustomGradient) {\n    changeColor(this.coreFigure, color)\n  }\n  \n  protected isSmoothFigure() {\n    return false;\n  }\n  \n  protected isCanChangePoints() {\n    return false;\n  }\n\n  protected bindHandlers() {\n    this.coreFigure.strokeColor = new this.paperScope.Color(0, 0, 0, Number.EPSILON);\n    this.coreFigure.strokeWidth = 5;\n    this.coreFigure.selectedColor = new this.paperScope.Color(0, 1, 0);\n\n    this.paperScope.project.view.on('mouseup', (event: paper.MouseEvent) => {\n      console.log('local mouseup');\n      \n      this.unbindSegmentMoveHandler();\n\n      const { shift: isShiftPress } = event.modifiers;\n      if (!this.isActive || !isShiftPress) return;\n\n      const hitResult = this.paperScope.project.hitTest(event.point, hitOptions);\n      if (!hitResult) return;\n\n      if (hitResult.item !== this.coreFigure || hitResult.type !== 'segment') return;\n      hitResult.segment.remove();\n      this._ResizeArea?.updateSize(this.coreFigure.bounds);\n      event.stopPropagation();\n    })\n\n    this.coreFigure.onMouseUp = (event: paper.MouseEvent) => {\n      this.unbindFigureMoveHandler();\n    }\n\n    this.coreFigure.onMouseDown = (event: paper.MouseEvent) => {\n      if (this.isPlayRef.current) {\n        this.playRef.current(this);\n        return;\n      }\n\n\n      let mustBindHandler = true;\n      if (!this.isActive) {\n        this.paperScope.project.activeLayer.selected = false;\n        this.isActive = true;\n      } else if (this.isCanChangePoints()) {\n        const { project } = this.paperScope;\n        const hitResult = project.hitTest(event.point, hitOptions);\n        if (hitResult) {\n          const { shift: isShiftPress } = event.modifiers;\n          if (isShiftPress && hitResult.type === 'segment') {\n            hitResult.segment.remove();\n            this._ResizeArea?.updateSize(this.coreFigure.bounds);\n            event.stopPropagation();\n            mustBindHandler = false;\n          } else if (hitResult.type === 'segment' && !isShiftPress) {\n            this.bindSegmentMoveHandler(hitResult.segment);\n            mustBindHandler = false;\n          } else if (hitResult.type === 'stroke') {\n            const position = hitResult.location.index + 1;\n            const segment = this.coreFigure.insert(position, event.point)\n            if (this.isSmoothFigure()) this.coreFigure.smooth();\n\n            this._ResizeArea?.updateSize(this.coreFigure.bounds);\n            this.bindSegmentMoveHandler(segment);\n            mustBindHandler = false;\n          }\n        }\n      }\n\n\n      if (mustBindHandler) {\n        const { point: { x, y } } = event;\n        this.bindFigureMoveHandler({ x, y });\n      }\n      this.onClick && this.onClick();\n    }\n  }\n\n  // Move segment logic\n\n  private bindSegmentMoveHandler(segment: paper.Segment) {\n    this._isSegmentMove = true;\n    this._moveSegmentHandler = throttle((event: MouseEvent) => {\n      const position = convertMouseEventToPosition(event);\n      segment.point.x = position.x;\n      segment.point.y = position.y;\n      this._ResizeArea?.updateSize(this.coreFigure.bounds);\n    }, 20)\n    window.addEventListener('mousemove', this._moveSegmentHandler);\n  }\n\n  private unbindSegmentMoveHandler() {\n    this._isSegmentMove = false;\n    if (!this._moveSegmentHandler) return;\n    \n    window.removeEventListener('mousemove', this._moveSegmentHandler);\n    this._moveSegmentHandler = null;\n  }\n\n  // Move figure logic\n\n  private bindFigureMoveHandler(position: IPosition) {\n    this._lastMovePosition = position;\n    this._moveFigureHandler = throttle((event) => this.moveFigure(event), 20)\n    window.addEventListener('mousemove', this._moveFigureHandler);\n  }\n\n  private unbindFigureMoveHandler() {\n    if (!this._moveFigureHandler) return;\n    window.removeEventListener('mousemove', this._moveFigureHandler);\n    this._lastMovePosition = null;\n  }\n\n  private moveFigure(event: MouseEvent) {\n    if (!this._lastMovePosition) return;\n    \n    const updatePosition = convertMouseEventToPosition(event);\n    const diffX = updatePosition.x - this._lastMovePosition.x;\n    const diffY = updatePosition.y - this._lastMovePosition.y;\n    this.coreFigure.position.x += diffX;\n    this.coreFigure.position.y+= diffY;\n\n    if (this._ResizeArea) this._ResizeArea.shift(diffX, diffY);\n    this._lastMovePosition = updatePosition;\n  }\n  // resize logic\n\n  get isResizing(): boolean {\n    if (!this._ResizeArea) return false;\n    return this._ResizeArea.isShow;\n  }\n\n  set isResizing(state: boolean) {\n    if (!this._ResizeArea) {\n      this._ResizeArea = new ResizeArea(this.paperScope, this.coreFigure.bounds);\n      this._ResizeArea.onResize = (size, position) => {\n        this.resizeFigure(size, position);\n      }\n    }\n    this._ResizeArea.isShow = state;\n  }\n\n  private resizeFigure(size: ISize, position: IPosition) {\n    this.coreFigure.bounds.width = size.width;\n    this.coreFigure.bounds.height = size.height;\n    this.coreFigure.bounds.x = position.x;\n    this.coreFigure.bounds.y = position.y;\n  }\n}","import { MutableRefObject } from 'react';\nimport { AbstractFigure } from './core/abstractFigure'\n\nexport class Ellipse extends AbstractFigure {\n  protected coreFigure: paper.Path.Ellipse;\n\n  constructor(\n    paperScope: paper.PaperScope,\n    isPlayRef: MutableRefObject<boolean>,\n    playRef: MutableRefObject<(figure: AbstractFigure) => void>,\n    rectangle: paper.Rectangle,\n    color: paper.Color,\n    id: string\n  ) {\n    super(paperScope, isPlayRef, playRef, id);\n    this.coreFigure = new paperScope.Path.Ellipse(rectangle);\n    this.coreFigure.fillColor = color;\n    this.bindHandlers();\n  }\n\n}\n","import { MutableRefObject } from 'react';\nimport { AbstractFigure } from './core/abstractFigure'\n\nexport class Rectangle extends AbstractFigure {\n  protected coreFigure: paper.Path.Rectangle;\n\n  constructor(\n    paperScope: paper.PaperScope,\n    isPlayRef: MutableRefObject<boolean>,\n    playRef: MutableRefObject<(figure: AbstractFigure) => void>,\n    rectangle: paper.Rectangle,\n    color: paper.Color,\n    id: string\n  ) {\n    super(paperScope, isPlayRef, playRef, id);\n    this.coreFigure = new paperScope.Path.Rectangle(rectangle);\n    this.coreFigure.fillColor = color;\n    this.bindHandlers();\n  }\n\n}\n","import { MutableRefObject } from 'react';\nimport { AbstractFigure } from './core/abstractFigure'\n\nexport class Polygon extends AbstractFigure {\n  protected coreFigure: paper.Path;\n\n  constructor(\n    paperScope: paper.PaperScope,\n    isPlayRef: MutableRefObject<boolean>,\n    playRef: MutableRefObject<(figure: AbstractFigure) => void>,\n    rectangle: paper.Rectangle,\n    color: paper.Color,\n    id: string\n  ) {\n    super(paperScope, isPlayRef, playRef, id);\n    this.coreFigure = this.createBlobPath(rectangle);\n    this.coreFigure.fillColor = color;\n    this.bindHandlers();\n  }\n\n  protected isCanChangePoints() {\n    return true;\n  }\n\n  protected createBlobPath(rectangle: paper.Rectangle, pointCount = 10) {\n    const maxRadius = 1;\n    // const maxRadius = Math.round((rectangle.size.width * rectangle.size.height)/2);\n    const path = new this.paperScope.Path();\n    path.closed = true;\n\n    const corePoint = rectangle.point.clone()\n    corePoint.x += Math.round(rectangle.width/2);\n    corePoint.y += Math.round(rectangle.height/2);\n\n    for (var i = 0; i < pointCount; i++) {\n      const delta = new this.paperScope.Point({\n        length: (maxRadius * 0.5) + (Math.random() * maxRadius * 0.25),\n        angle: (360 / pointCount) * i\n      });\n      path.add(corePoint.multiply(delta));\n    }\n\n    path.position.x = corePoint.x + Math.round(rectangle.width/2);\n    path.position.y = corePoint.y + Math.round(rectangle.height/2);\n    if (this.isSmoothFigure()) path.smooth();\n\n    return path;\n  }\n}\n","import { Polygon } from './polygon';\n\nexport class Blob extends Polygon {\n  protected isSmoothFigure() {\n    return true;\n  }\n}","import styled from '@emotion/styled';\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100%;\n`;\n\nexport const Content = styled.div`\n  width: 100%;\n  height: 100%;\n`;","import React, { FC, Ref, memo } from 'react';\nimport { Content } from '../styleds/root'\n\ntype CanvasProps = {\n  canvasRef: Ref<HTMLCanvasElement>\n}\n\nconst Canvas: FC<CanvasProps> = ({ canvasRef }) => {\n  console.log('test');\n  \n  return (\n    <Content>\n      <canvas\n        ref={canvasRef}\n        style={{\n          width: '100%',\n          height: '100%'\n        }}  \n      />\n    </Content>\n  )\n}\n\nexport default memo(Canvas);\n","import React, { FC, useCallback, useEffect, useRef, memo, MutableRefObject, useMemo } from 'react';\nimport { PaperScope, Color } from 'paper'\nimport { Track } from '@common/launchpad';\nimport MusicFactory from '@utils/MusicFactory'\nimport { createFigureFunction, FigureClassUnion, Figures, removeFigureFunction } from './drawer.types'\nimport { AbstractFigure, Ellipse, Rectangle, Blob, Polygon } from './entity'\nimport ContentCanvas from './parts/canvas'\nimport { Container } from './styleds/root'\nimport soundMap from '@consts/soundMap';\n\n// TODO: WTF?? Find decision\n// type FigureMap = {\n//   [key in Figures]: typeof AbstractFigure;\n// }\n\n\ntype FigureMap = {\n  [key in Figures]: FigureClassUnion;\n}\n\n\ntype FigureData = {\n  figure: AbstractFigure;\n  track: Track;\n}\n\ntype DrawerProps = {\n  setSelectFigure: React.Dispatch<React.SetStateAction<FigureData | null>>\n  setCanvasReady: VoidFunction;\n  createFigureRef: MutableRefObject<createFigureFunction | null>;\n  removeFigureRef: MutableRefObject<removeFigureFunction | null>;\n  rootBackgroundRef: MutableRefObject<paper.Path.Rectangle | null>;\n  isPlayRef: MutableRefObject<boolean>;\n}\n\nconst figureClassMap: FigureMap = {\n  ellipse: Ellipse,\n  rectangle: Rectangle,\n  polygon: Polygon,\n  blob: Blob,\n}\n\nconst Drawer: FC<DrawerProps> = ({\n  setSelectFigure,\n  setCanvasReady,\n  createFigureRef,\n  removeFigureRef,\n  rootBackgroundRef,\n  isPlayRef\n}) => {\n  const musicFactory = useMemo(() => new MusicFactory(soundMap), []);\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const backgroundRef = useRef<paper.Path.Rectangle | null>(null);\n  const scopeRef = useRef(new PaperScope());\n  const figureArrRef = useRef<FigureData[]>([]);\n\n  const playRef = useRef<(figure: AbstractFigure) => void>((figure: AbstractFigure) => {\n    const data = figureArrRef.current.find((item) => item.figure === figure);\n    if (!data) return;\n    musicFactory.playSong(data.track.map(item => item.sound));\n  });\n  \n\n\n  useEffect(() => {\n    if (!canvasRef.current) {\n      throw new Error('Expected canvas element missing')\n    }\n\n    const scope = scopeRef.current;\n    scope.setup(canvasRef.current);\n\n    const background = new scope.Path.Rectangle(scope.view.bounds);\n    background.fillColor = new scope.Color(1, 1, 1, 1);\n    background.onClick = () => {\n      setSelectFigure(null);\n      figureArrRef.current.forEach((data) => {\n        data.figure.isActive = false;\n      })\n    };\n\n    backgroundRef.current = background;\n    rootBackgroundRef.current = background;\n    \n    scope.project.view.on('mouseup', (event: paper.MouseEvent) => {\n      const hitResult = scope.project.hitTest(event.point, {\n        segments: true,\n        stroke: true,\n        fill: true,\n        tolerance: 5\n      });\n      \n      if (hitResult) return;\n      setSelectFigure(null);\n      figureArrRef.current.forEach((data) => {\n        data.figure.isActive = false;\n      })\n    });\n\n\n    setCanvasReady()\n  }, [setSelectFigure, setCanvasReady])\n\n  const onFigureClick = useCallback((triggerFigure: AbstractFigure) => {\n    triggerFigure.bringToFront();\n    figureArrRef.current.forEach((data) => {\n      if (triggerFigure === data.figure) {\n        setSelectFigure(data);\n      } else {\n        data.figure.isActive = false;\n      };\n    })\n  }, [setSelectFigure])\n\n  const createFigure = useCallback((figure: Figures) => {\n    const scope = scopeRef.current;\n    if (!scope) return;\n    const CreatedClass = figureClassMap[figure];\n\n    const color = new Color(Math.random(), Math.random(), Math.random());\n    const point = new scope.Point(80, 80);\n    const size = new scope.Size(200, 200);\n    const rectangle = new scope.Rectangle(point, size);\n\n    const createdFigure = new CreatedClass(scope, isPlayRef, playRef, rectangle, color, 'test')\n    createdFigure.onClick = () => onFigureClick(createdFigure);\n\n    const selectData = { figure: createdFigure, track: [] };\n    figureArrRef.current.push(selectData);\n  }, [onFigureClick])\n\n  const removeFigure = useCallback((figure: FigureData) => {\n    const index = figureArrRef.current.findIndex((item) => item === figure);\n    if (index === -1) return;\n\n    const removedFigure = figureArrRef.current[index];\n    figureArrRef.current.splice(index, 1);\n    removedFigure.figure.remove();\n  }, [])\n\n  useEffect(() => {\n    createFigureRef.current = createFigure;\n    removeFigureRef.current = removeFigure;\n  }, [createFigure, removeFigure, createFigureRef, removeFigureRef]);\n\n  return (\n    <Container>\n      <ContentCanvas canvasRef={canvasRef} />\n    </Container>\n  )\n}\n\nexport default memo(Drawer);\n","import styled from '@emotion/styled';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\n\nexport const SidebarContainer = styled.div`\n  height: 100%;\n  width: 260px;\n  padding: 15px 10px;\n  border-left: 1px solid #c1c1c1;\n\n  &:after {\n    content: '';\n    display: block;\n    width: 260px;\n  }\n`;\n\nexport const CreateButtonContainer = styled.div`\n  & MuiButtonBase-root {\n    border-radius: 0;\n  }\n`;\n\nexport const CreateButtonPaper = styled(Paper)`\n  width: 100%;\n`;\n\nexport const CreateButton = styled(Button)`\n  width: 100%;\n`;\n","import React, { FC, useState, useEffect, useLayoutEffect, useMemo } from 'react';\nimport styled from '@emotion/styled';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n// @ts-ignore\nimport { ColorPicker } from 'react-color-gradient-picker';  \nimport 'react-color-gradient-picker/dist/index.css';\nimport { CustomColor, CustomGradient } from '../../drawer.types'\n\nconst PickerSelectWrap = styled.div`\n  padding: 0 5px 5px;\n`;\n\nconst ColorPickerWrap = styled.div`\n  .ui-color-picker {\n    width: 100%;\n    margin: 0;\n    padding-top: 10px;\n    background-color: transparent;\n    .input-group {\n      display: none;\n    }\n  }\n`;\n\nconst defaultColor: CustomColor = {\n  kind: 'rgb',\n  red: 255,\n  green: 0,\n  blue: 0,\n  alpha: 1,\n};\n\nconst defaultGradient: any = {\n  kind: 'gradient',\n  points: [\n      {\n          left: 0,\n          red: 0,\n          green: 0,\n          blue: 0,\n          alpha: 1,\n      },\n      {\n          left: 100,\n          red: 255,\n          green: 0,\n          blue: 0,\n          alpha: 1,\n      } ],\n  degree: 0,\n  type: 'linear',\n};\n\ntype Color = CustomColor | CustomGradient;\n\ntype ColorPickerComponentProps = {\n  onColorChange: (color: Color) => void;\n  color: Color | null;\n}\n\nconst ColorPickerComponent:FC<ColorPickerComponentProps>  = ({ color, onColorChange }) => {\n  const [colorAttrs, setColorAttrs] = useState<Color>(color ?? defaultColor);\n  const [pikerIsGradient, setPikerType] = useState<number>(0);\n  const [reset, setReset] = useState<boolean>(false);\n    \n  useEffect(() => {\n    if (color) {\n      const updatePikerType = Number(color.kind === 'gradient');\n      console.log('updatePikerType ', updatePikerType);\n      \n      setPikerType(updatePikerType);\n      setColorAttrs({ ...color });\n    }\n    setReset(true);\n  }, [color, setColorAttrs, setPikerType, setReset]);\n    \n  useLayoutEffect(() => {\n    setReset(false);\n  }, [reset, setReset]);\n\n  const onChange = (color: Color) => {\n    setColorAttrs(color);\n    onColorChange(color);\n  };\n\n  const colorProps: any = useMemo(() => {\n    const data: any = {};\n    if (!colorAttrs) return data;\n    if (pikerIsGradient && colorAttrs.kind === 'gradient') {\n      data.gradient = {...colorAttrs};\n      delete data.gradient.kind;\n    }\n\n    if (!pikerIsGradient && colorAttrs.kind === 'rgb') {\n      data.color = {...colorAttrs};\n      delete data.color.kind;\n    }\n\n    return data;\n  }, [colorAttrs, pikerIsGradient])\n  \n  if (reset) return null;\n  \n  return (\n    <>\n      <PickerSelectWrap>\n        <Select\n          value={pikerIsGradient}\n          onChange={(event) => setPikerType(event.target.value)}\n          fullWidth={true}\n        >\n          <MenuItem value={0} >Fill</MenuItem>\n          <MenuItem value={1} >Gradient</MenuItem>\n        </Select>\n      </PickerSelectWrap>\n      <ColorPickerWrap>\n        <ColorPicker\n          // @ts-ignore\n          onStartChange={onChange}\n          onChange={onChange}\n          onEndChange={onChange}\n          isGradient={pikerIsGradient}\n          {...colorProps}\n        />\n      </ColorPickerWrap>\n    </>\n  )\n}\n\n\nexport default ColorPickerComponent","import React, { FC, MutableRefObject, useCallback, useMemo } from 'react';\nimport paper from 'paper'\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { Box } from '@material-ui/core';\nimport 'react-color-gradient-picker/dist/index.css';\nimport Launchpad, { Track } from '@common/launchpad';\nimport { FigureData, CustomColor, CustomGradient } from '../../drawer.types';\nimport { SidebarContainer } from '../../styleds/sidebar';\nimport ColorPicker from './color-piker';\nimport changeColor from '../../entity/utils/changeColor';\n\ntype Color = CustomColor | CustomGradient;\n\ntype SidebarProps = {\n  figureData: FigureData | null;\n  rootBackgroundRef: MutableRefObject<paper.Path.Rectangle | null>;\n}\n\nconst convertToColorToPikerFormat = (color: paper.Color): Color => {\n  if (color.type === 'rgb') {\n    return {\n      kind: 'rgb',\n      alpha: color.alpha,\n      red: Math.round(color.red*255),\n      blue: Math.round(color.blue*255),\n      green: Math.round(color.green*255),\n    }\n  } else {\n    const { gradient } = color;\n    return {\n      kind: 'gradient',\n      points: gradient.stops.map((stop) => ({\n        alpha: stop.color.alpha,\n        red: Math.round(stop.color.red*255),\n        blue: Math.round(stop.color.blue*255),\n        green: Math.round(stop.color.green*255),\n        left: stop.offset*100\n      })),\n      type: gradient.radial ? 'radial' : 'linear',\n    }\n  }\n}\n\n\n// const convertToColorToFigureFormat = (color: Color, scope: paper.PaperScope): paper.Color => {\n//   if (!isGradient(color)) {\n//     return new paper.Color(color.red/255, color.green/255, color.blue/255, color.alpha);\n//   }\n//   const targetColor = new scope.Color(0, 0, 0);\n//   const stops = color.points.map((point) => {\n//     const stop = new paper.GradientStop(\n//       new paper.Color(point.red/255, point.green/255, point.blue/255, point.alpha),\n//       point.left/100\n//     );\n//   })\n\n//   targetColor.gradient = new scope.Gradient(stops, false);\n//   targetColor.gradient.radial = false;\n//   targetColor.gradient.stops = stops;\n\n//   return targetColor;\n// }\n\nconst Sidebar:FC<SidebarProps> = ({ figureData, rootBackgroundRef }) => {\n  const updateFigureColor = useCallback((color: Color, figureData: FigureData | null) => {\n    if (figureData) {\n      figureData.figure.setColor(color)\n    } else {\n      const background = rootBackgroundRef.current;\n      if (!background) return;\n      changeColor(background, color)\n    }\n    // changeColor(figureData, color)\n    // const paperScope = figureData.figure.scope\n\n    // const figureColor = convertToColorToFigureFormat(color, paperScope);\n    // console.log('figureColor ', figureColor);\n    // figureData.figure.setColor(figureColor);\n  }, [])\n\n  const updateFigureTrack = useCallback((track: Track, figureData) => {\n    if (!figureData) return;\n    figureData.track = track;\n  }, [])\n\n  const transformColor = useMemo(() => {\n    if (!figureData) {\n      const background = rootBackgroundRef.current;\n      if (!background || !background.fillColor) return null;\n      return convertToColorToPikerFormat(background.fillColor)\n    }\n    const color = figureData.figure.getColor();\n    return color && convertToColorToPikerFormat(color);\n  }, [figureData])\n\n  return (\n    <SidebarContainer>\n\n\n          <InputLabel>Color</InputLabel>\n\n        <ColorPicker\n          onColorChange={(color) => updateFigureColor(color, figureData)}\n          color={transformColor}\n        />\n\n      {!!figureData && (\n    <>\n          \n              <InputLabel>Sound</InputLabel>\n\n          <Launchpad\n            onMusicChange={(track) => updateFigureTrack(track, figureData)}\n            track={figureData?.track}\n          />\n      </>\n      )}\n    </SidebarContainer>\n  )\n}\n\n\nexport default Sidebar\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M31.5 15.5C31.5 23.7694 24.5755 30.5 16 30.5C7.4245 30.5 0.5 23.7694 0.5 15.5C0.5 7.23057 7.4245 0.5 16 0.5C24.5755 0.5 31.5 7.23057 31.5 15.5Z\",\n  stroke: \"black\"\n});\n\nvar SvgEllipse = function SvgEllipse(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 31,\n    viewBox: \"0 0 32 31\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEllipse, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ellipse.cca01512.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M26.3388 2L17.6612 14.4091L2.04132 4.48182L11.0661 20.7909L1 23.2727L12.4545 25.7545L8.63636 41L20.438 27.1727L33.6281 36.0364L25.2975 23.2727L43 14.4091L25.2975 15.4727L26.3388 2Z\",\n  stroke: \"black\"\n});\n\nvar SvgPolygon = function SvgPolygon(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 44,\n    height: 42,\n    viewBox: \"0 0 44 42\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPolygon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/polygon.6be0083d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 0.5,\n  y: 0.5,\n  width: 27,\n  height: 27,\n  stroke: \"black\"\n});\n\nvar SvgRectangle = function SvgRectangle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 28,\n    height: 28,\n    viewBox: \"0 0 28 28\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgRectangle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rectangle.796cbb72.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.1726 10.98C12.265 13.0386 11.376 11.0544 9.84031 7.24901C8.5856 4.13987 3.88061 5.07261 2.62603 6.31627C0.772506 8.15367 0.164671 13.8435 2.62603 17.1983C5.13532 20.6183 7.95832 17.8201 7.95832 21.862C7.95832 24.0384 -0.510648 28.3912 4.82167 34.9205C10.154 41.4497 14.2316 28.3912 18.6229 27.4585C23.0142 26.5257 15.8 43.1127 27.4056 38.0296C40.8932 32.1222 27.5388 27.1049 29.6012 24.0384C30.8559 22.1729 42.2149 26.1542 40.8932 19.9965C37.7565 5.38349 27.4056 14.0891 26.1509 14.0891C24.6539 14.0891 23.3279 11.1665 24.5826 8.18173C26.1509 4.45073 27.4056 1.65252 19.5639 1.03069C11.7223 0.408858 17.3683 9.42542 15.1726 10.98Z\",\n  stroke: \"black\"\n});\n\nvar SvgBlob = function SvgBlob(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 42,\n    height: 40,\n    viewBox: \"0 0 42 40\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgBlob, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/blob.3828cde4.svg\";\nexport { ForwardRef as ReactComponent };","import React, { FC } from 'react';\nimport styled from '@emotion/styled';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport StopIcon from '@material-ui/icons/Stop';\nimport { FigureData, Figures } from '../drawer.types';\nimport { ReactComponent as ellipseSVG } from '../assets/ellipse.svg';\nimport { ReactComponent as polygonSVG } from '../assets/polygon.svg';\nimport { ReactComponent as rectangleSVG } from '../assets/rectangle.svg';\nimport { ReactComponent as blobSVG } from '../assets/blob.svg';\n\ntype CreateControlGroupProps = {\n  selectFigure: FigureData | null;\n  isPlay: boolean;\n  playToggle: VoidFunction;\n  createFigure: (figure: Figures) => void;\n  removeFigure: (figure: FigureData) => void;\n}\n\ntype CustomIconButtonProps = {\n  isDelete?: boolean;\n} \n\nconst CustomIconButton = styled(IconButton)<CustomIconButtonProps>`\n  &.MuiIconButton-root {\n    margin-bottom: ${({ isDelete }) => isDelete ? '20px' : '15px'};\n    background: ${({ isDelete }) => isDelete ? '#f44336' : '#3f51b5'};\n    color: #fff;\n    &:hover {\n      background: ${({ isDelete }) => isDelete ? '#d32f2f' : '#303f9f'};\n    }\n  }\n`;\n\nconst ControlGroupContainer = styled.div`\n  position: absolute;\n  left: 15px;\n  bottom: 50%;\n  margin-bottom: -126px;\n`;\n\nconst ModeToggleContainer = styled.div`\n  position: absolute;\n  left: 15px;\n  bottom: 50%;\n  margin-bottom: -166px;\n`;\n\ntype ControlSubgroupContainerProps = {\n  hasButtonOffset?: boolean;\n} \n\nconst ControlSubgroupContainer = styled.div<ControlSubgroupContainerProps>`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ${(props) => props.hasButtonOffset ? '10px' : '0'};\n  \n`;\n\nconst CreateControlGroup: FC<CreateControlGroupProps> = ({\n  selectFigure,\n  isPlay,\n  playToggle,\n  createFigure,\n  removeFigure,\n}) => (\n  <ControlGroupContainer>\n    {!!selectFigure && (\n      <ControlSubgroupContainer\n        hasButtonOffset={true}\n        onClick={() => removeFigure(selectFigure)}\n      >\n        <CustomIconButton isDelete={true}>\n          <CloseIcon />\n        </CustomIconButton>\n      </ControlSubgroupContainer>\n    )}\n    <ControlSubgroupContainer>\n      <CustomIconButton onClick={() => createFigure('rectangle')}>\n        <SvgIcon component={rectangleSVG} viewBox=\"0 0 34 34\" />\n      </CustomIconButton>\n      <CustomIconButton onClick={() => createFigure('ellipse')}>\n        <SvgIcon component={ellipseSVG} viewBox=\"0 0 36 36\" />\n      </CustomIconButton>\n      <CustomIconButton onClick={() => createFigure('blob')}>\n        <SvgIcon component={blobSVG} viewBox=\"0 0 36 36\" />\n      </CustomIconButton>\n      <CustomIconButton onClick={() => createFigure('polygon')}>\n        <SvgIcon component={polygonSVG} viewBox=\"0 0 36 36\" />\n      </CustomIconButton>\n    </ControlSubgroupContainer>\n    <ControlSubgroupContainer >\n      <CustomIconButton onClick={playToggle}>\n        {!isPlay && <PlayArrowIcon />}\n        {isPlay && <StopIcon />}\n      </CustomIconButton>\n    </ControlSubgroupContainer>\n  </ControlGroupContainer>\n)\n\nexport default CreateControlGroup;","import Drawer from './drawer-container';\n\nexport default Drawer;","import React, { useCallback, useRef, useState } from 'react';\nimport { Track } from '@common/launchpad';\nimport Drawer from './drawer'\nimport { AbstractFigure } from './entity'\nimport Sidebar2 from './parts/sidebar'\nimport { Container } from './styleds/root'\nimport CreateControlGroup from './parts/create-control-group';\nimport { Figures, createFigureFunction, removeFigureFunction } from './drawer.types';\n\ntype FigureData = {\n  figure: AbstractFigure;\n  track: Track;\n}\n\n\nconst DrawerContainer = () => {\n  const [selectFigure, setSelectFigure] = useState<FigureData | null>(null);\n  const [isCanvasReady, setCanvasStatus] = useState<boolean>(false);\n  const createFigureRef = useRef<createFigureFunction | null>(null);\n  const removeFigureRef = useRef<removeFigureFunction | null>(null);\n  const backgroundRef = useRef<paper.Path.Rectangle | null>(null);\n\n  const isPlayRef = useRef<boolean>(false);\n  const [isPlay, setPlayStatus] = useState<boolean>(false);\n  isPlayRef.current = isPlay;\n\n  const createFigure = useCallback((figureType: Figures) => {\n    if (!createFigureRef.current) return;\n    createFigureRef.current(figureType);\n  }, []);\n  \n  const removeFigure = useCallback(() => {\n    if (!removeFigureRef.current || !selectFigure) return;\n    removeFigureRef.current(selectFigure);\n    setSelectFigure(null);\n  }, [selectFigure, setSelectFigure]);\n  \n  const setCanvasReady = useCallback(() => {\n    setCanvasStatus(true);\n  }, [setCanvasStatus]);\n  \n  const togglePlayMode = useCallback(() => {\n    if (selectFigure) {\n      selectFigure.figure.isActive=false;\n    }\n    setPlayStatus(!isPlay);\n  }, [isPlay, selectFigure, setPlayStatus]);\n\n  return (\n    <Container>\n      {isCanvasReady && (\n        <CreateControlGroup\n          isPlay={isPlay}\n          selectFigure={selectFigure}\n          createFigure={createFigure}\n          removeFigure={removeFigure}\n          playToggle={togglePlayMode}\n        />\n      )}\n      <Drawer\n        setSelectFigure={setSelectFigure}\n        setCanvasReady={setCanvasReady}\n        createFigureRef={createFigureRef}\n        removeFigureRef={removeFigureRef}\n        rootBackgroundRef={backgroundRef}\n        isPlayRef={isPlayRef}\n      />\n      {!isPlay && (\n        <Sidebar2\n          figureData={selectFigure}\n          rootBackgroundRef={backgroundRef}\n        />\n      )}\n    </Container>\n  )\n}\n\nexport default DrawerContainer;\n","import React from 'react';\n// import Launchpad from '@common/launchpad'\nimport Drawer from '@common/drawer'\n\nimport 'normalize.css'\nimport './root.css'\n\nconst App = () => {\n  return (\n    <Drawer/>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import {Howl} from 'howler';\n\ntype InitSoundData = {\n  [sound: string]: string;\n}\n\ntype SoundMap = {\n  [sound: string]: Howl\n};\n\n\n\nfunction playSound(soundMap: SoundMap, soundArr: string[], index = 0) {\n    const soundKey = soundArr[index];\n    if (!soundKey) return;\n\n    const sound = soundMap[soundKey];\n    sound.once('end', () => {\n      playSound(soundMap, soundArr, index + 1);\n    })\n\n    sound.play();\n}\n\n\nexport default class SongFactory {\n  protected soundMap: SoundMap;\n\n  constructor(initSoundData: InitSoundData) {\n    this.soundMap = {}\n\n    Object.keys(initSoundData).forEach((key) => {\n      const url = initSoundData[key]\n      this.soundMap[key] = new Howl({ src: [url] });\n    });\n  }\n\n  playSong(soundArray: string[]) {\n    const unexpendedSound = soundArray.find(\n      (sound) => !this.soundMap[sound]\n    );\n\n    if (unexpendedSound) {\n      throw new Error(`Unexpended sound ${unexpendedSound}`);\n    }\n\n\n    const soundMap = this.soundMap;\n    console.log(soundArray);\n    playSound(soundMap, soundArray)\n  }\n};\n","const soundMap = {\n  moon: './sounds/1 Xylophone.mp3',\n  corona: './sounds/2 Xylophone.mp3',\n  confetti: './sounds/3 Xylophone.mp3',\n  bubbles: './sounds/4 Xylophone.mp3',\n  party: './sounds/5 Xylophone.mp3',\n  bass:'./sounds/6 Xylophone.mp3',\n  x7: './sounds/7 Xylophone.mp3',\n  x8: './sounds/8 Xylophone.mp3',\nx9:'./sounds/9 Xylophone.mp3',\nb1: './sounds/1 Bass.mp3',\nb2: './sounds/2 Bass.mp3',\nb3: './sounds/3 Bass.mp3',\nb4: './sounds/4 Bass.mp3',\nb5: './sounds/5 Bass.mp3',\nb6:'./sounds/6 Bass.mp3',\nb7: './sounds/7 Bass.mp3',\nb8: './sounds/8 Bass.mp3',\nb9:'./sounds/9 Bass.mp3',\nd1: './sounds/1 Drums.mp3',\nd2: './sounds/2 Drums.mp3',\nd3: './sounds/3 Drums.mp3',\nd4: './sounds/4 Drums.mp3',\nd5: './sounds/5 Drums.mp3',\nd6:'./sounds/6 Drums.mp3',\nd7: './sounds/7 Drums.mp3',\nd8: './sounds/8 Drums.mp3',\nd9:'./sounds/9 Drums.mp3',\na1: './sounds/1.mp3',\na2: './sounds/2.mp3',\na3: './sounds/3.mp3',\na4: './sounds/4.mp3',\na5: './sounds/5.mp3',\na6:'./sounds/6.mp3',\na7: './sounds/7.mp3',\na8: './sounds/8.mp3',\na9:'./sounds/9.mp3'\n}\n\nexport default soundMap;\n","import styled from '@emotion/styled';\n\nexport const Container  = styled.div`\n  width: 240px;\n  height: 240px;\n`;\n","import { css } from '@emotion/react';\nimport styled from '@emotion/styled';\n\n\nexport const MatrixContainer = styled.div`\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 10px;\n`;\n\nexport const MatrixRow = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    height: 100%;\n    /* margin: 10px 0; */\n`;\n\ntype MatrixCellProps = {\n    color?: string;\n    isSelect?: boolean;\n}\nexport const MatrixCell = styled.div<MatrixCellProps>`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 100%;\n    /* margin: 0 10px; */\n    box-sizing: border-box;\n    background-color: ${(props) => props.color ?? '#eee'};\n    text-align: center;\n    cursor: pointer;\n    font-size: 12px;\n    ${(props) => props.isSelect && css`background: white`}\n    * {\n        font-size: 12px;\n    }\n`;\n","import { IPosition } from '@consts/types';\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { ISoundMatrix, Track } from '../launchpad.types';\nimport {\n  MatrixContainer,\n  MatrixRow,\n  MatrixCell\n} from '../styleds/matrix';\n\ninterface IMatrixProps {\n  track: Track;\n  matrix: ISoundMatrix;\n  onToggleCell: (position: IPosition) => void;\n}\n\ninterface IActiveCellMap {\n  [row: number]: {\n    [cell: number]: number\n  }\n}\n\nconst LaunchpadMatrix: FC<IMatrixProps> = ({\n    matrix,\n    track,\n    onToggleCell\n}) => {\n  const orderMap = useMemo(() => {\n    const keyMap = new Array(matrix.length).fill(null).map((_, i) => [i, {}]);\n    const map: IActiveCellMap = Object.fromEntries(keyMap);\n    return track.reduce((obj, data, index) => {\n      const { position: { x, y } } = data;\n      obj[y][x] = index + 1;\n      return obj;\n    }, map)\n  }, [track, matrix]);\n\n  const isCellSelect = useCallback(\n    (x: number, y: number) => !!orderMap[y][x],\n    [orderMap]\n  )\n\n  const onCellClick = useCallback((x: number, y: number) => {\n    onToggleCell({ x, y });\n  }, [onToggleCell])\n\n  return (\n    <MatrixContainer>\n      {matrix.map((row, rowIndex) => (\n        <MatrixRow key={rowIndex}>\n          {row.map((cell, cellIndex) => (\n            <MatrixCell\n              key={cellIndex}\n              isSelect={isCellSelect(cellIndex, rowIndex)}\n              color={cell.color}\n              onClick={() => onCellClick(cellIndex, rowIndex)}\n            >\n              {cell.nodeName}\n            </MatrixCell>\n          ))}\n        </MatrixRow>\n      ))}\n    </MatrixContainer>\n  )\n}\n\nexport default LaunchpadMatrix;","import { ISoundMatrix } from \"@components/common/launchpad\";\n\nconst matrix: ISoundMatrix = [\n  [\n    { nodeName: 'a7', sound: 'x7', color: '#72cc7b' },\n    { nodeName: 'a8', sound: 'x8', color: '#868d7c' },\n    { nodeName: 'a9', sound: 'x9', color: '#994d7c' },\n    { nodeName: 'b7', sound: 'b7', color: '#8d3384' },\n    { nodeName: 'b8', sound: 'b8', color: '#797283' },\n    { nodeName: 'b9', sound: 'b9', color: '#66b283' }\n\n\n  ],\n  [\n    { nodeName: 'a4', sound: 'bubbles', color: '#b7c941' },\n    { nodeName: 'a5', sound: 'party', color: '#c7993f' },\n    { nodeName: 'a6', sound: 'bass', color: '#c3684a' },\n    { nodeName: 'b4', sound: 'b4', color: '#4836be' },\n    { nodeName: 'b5', sound: 'b5', color: '#3866c0' },\n    { nodeName: 'b6', sound: 'b6', color: '#3c97b5' }\n\n\n  ],\n  [\n    { nodeName: 'a1', sound: 'moon', color: '#f4e501' },\n    { nodeName: 'a2', sound: 'corona', color: '#f1b40d' },\n    { nodeName: 'a3', sound: 'confetti', color: '#ed8318' },\n    { nodeName: 'b1', sound: 'b1', color: '#0b1afe' },\n    { nodeName: 'b2', sound: 'b2', color: '#0e4bf2' },\n    { nodeName: 'b3', sound: 'b3', color: '#127ce7' }\n\n],\n[\n  { nodeName: 'd7', sound: 'd7', color: '#aaa3b1' },\n  { nodeName: 'd8', sound: 'd8', color: '#b94eb2' },\n  { nodeName: 'd9', sound: 'd9', color: '#c617b2' },\n  { nodeName: 'x7', sound: 'a7', color: '#ba9ceb' },\n  { nodeName: 'x8', sound: 'a8', color: '#6f6dde' },\n  { nodeName: 'x9', sound: 'a9', color: '#3b4fd5' }\n\n],\n[\n  { nodeName: 'd4', sound: 'd4', color: '#d89e81' },\n  { nodeName: 'd5', sound: 'd5', color: '#e15c7f' },\n  { nodeName: 'd6', sound: 'd6', color: '#df2a89' },\n  { nodeName: 'x4', sound: 'a4', color: '#6d8bb3' },\n  { nodeName: 'x5', sound: 'a5', color: '#3366a7' },\n  { nodeName: 'x6', sound: 'a6', color: '#154da9' }\n\n],\n[\n  { nodeName: 'd1', sound: 'd1', color: '#f9ce04' },\n  { nodeName: 'd2', sound: 'd2', color: '#f87f2e' },\n  { nodeName: 'd3', sound: 'd3', color: '#f6434c' },\n  { nodeName: 'x1', sound: 'a1', color: '#0f802e' },\n  { nodeName: 'x2', sound: 'a2', color: '#00614f' },\n  { nodeName: 'x3', sound: 'a3', color: '#004867' }\n\n]\n\n  ]\n\nexport default matrix;\n","import React, { FC, useCallback, useEffect, useMemo, useState } from 'react';\nimport { IPosition } from '@consts/types';\nimport isPositionEqual from '@utils/isPositionEqual'\nimport MusicFactory from '@utils/MusicFactory'\nimport { Track } from './launchpad.types'\nimport { Container } from './styleds/root';\nimport Matrix from './parts/matrix'\n\nimport defaultMatrix from '@consts/matrix';\nimport soundMap from '@consts/soundMap';\nimport { Button } from '@material-ui/core';\n\ninterface LaunchPadProps {\n  onMusicChange?: (music: Track) => void\n  track?: Track;\n}\n\nconst LaunchPad: FC<LaunchPadProps> = ({ track, onMusicChange }) => {\n  const [localTrack, setMusic] = useState<Track>([]);\n\n  useEffect(() => {\n    setMusic(() => track ?? []);\n  }, [track, setMusic])\n\n  useEffect(() => {\n    if (onMusicChange) onMusicChange(localTrack);\n  }, [localTrack, onMusicChange])\n\n  const musicFactory = useMemo(() => new MusicFactory(soundMap), []);\n\n  const onPlay = useCallback(() => {\n    const musicRoad = localTrack.map((item) => item.sound);\n    musicFactory.playSong(musicRoad);\n  }, [musicFactory, localTrack]);\n\n  // TODO: refactor this fn\n  const onToggleCell = useCallback((position: IPosition) => {\n    setMusic((track) => {\n      const index = track.findIndex((trackItem) => isPositionEqual(trackItem, position));\n      if (index > -1) {\n        return [\n          ...track.slice(0, index),\n          ...track.slice(index + 1)\n        ]\n      } else {\n        const { sound } =  defaultMatrix[position.y][position.x]\n        return [...track, {\n          position,\n          sound\n        }];\n      }\n    })\n  }, [setMusic])\n\n  return (\n    <Container>\n      <Matrix\n        matrix={defaultMatrix}\n        track={localTrack}\n        onToggleCell={onToggleCell}\n      />\n      <Button\n        onClick={onPlay}\n        color='primary'\n        variant=\"contained\"\n        fullWidth={true}\n      >\n        Play\n      </Button>\n    </Container>\n  )\n}\n\nexport default LaunchPad;\n","import { IPosition } from \"../consts/types\";\n\ntype EntityWithPosition<T> = T & {\n  position: IPosition;\n};\n\nexport default <T>(entity: EntityWithPosition<T>, position: IPosition) => {\n  const { position: entityPosition } = entity;\n  return position.x === entityPosition.x && position.y === entityPosition.y;\n}","export * from './launchpad.types';\nexport { default } from './launchpad';\n"],"sourceRoot":""}